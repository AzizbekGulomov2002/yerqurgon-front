import{u as p,j as e,o as j,e7 as A,l as z,M as k,a2 as C,aI as D,aB as E,aQ as O,B as F,e8 as q,X as K,ar as H,r as h,aq as w}from"./index-TTKrRBsV.js";import{G as N,C as Q}from"./GlobalSearchInput-D1DeoeWx.js";import{C as X}from"./CustomTabs-DeR7qKEd.js";import{C as L}from"./CustomDataTable-D2IlOEuA.js";import{P as Y,B as J}from"./PageTitle-OKMYAOp7.js";import{j as W,k as Z,l as $}from"./clients.requests-DE0ZkmW1.js";import{g as ee,i as te,j as re}from"./products.requests-D64CJ7hA.js";import{u as G}from"./useQuery-DXHJDm7O.js";import{C as T}from"./CustomModalConfirm-DuPb8srr.js";import{u as ae}from"./useClientTypes-BFb73J4y.js";import{T as x}from"./index-Ce0i5KU3.js";import{R as U}from"./DeleteFilled-Lrowix85.js";import{a as ne,u as se,b as ie}from"./useProductTypes-Dl-iJJ8n.js";import{R as S,C as c}from"./row-Bxwr5CQq.js";import{T as R}from"./index-CB8Qoy1w.js";import"./index-CRizbU4B.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./fade-m1HoRkfl.js";import"./product-categories.requests-CmDVyG0I.js";import"./product-formats.requests-TWbBd2Xh.js";import"./PlusOutlined-Ba-GwlE8.js";const le=()=>{const{t:n}=p();return[{title:e.jsxs(j,{align:"center",gap:"small",children:[e.jsx(A,{size:20}),e.jsx("span",{children:n("Sozlamalar")})]})},{title:n("O'chirilgan")}]},oe=(n,o,d,l)=>{const{t:r}=p();z();const u=ae(),s=k({mutationFn:W,onSuccess:()=>{C(r("Muvaffaqiyatli bajarildi !")),l()},onError:t=>{console.log(t)}}),g=t=>{s.mutate(t)},f=k({mutationFn:Z,onSuccess:()=>{C(r("Muvaffaqiyatli bajarildi !")),l()},onError:t=>{console.log(t)}}),y=t=>{f.mutate(t)};return[{title:"№",dataIndex:"id",key:"id",render:(t,a,m)=>e.jsx(e.Fragment,{children:(n.current-1)*n.pageSize+m+1})},{title:r("Nomi"),dataIndex:"name",key:"name"},{title:r("Telefon raqami"),dataIndex:"phone",key:"phone",render:t=>e.jsx(e.Fragment,{children:t})},{title:r("Mijoz turi"),dataIndex:"client_type",filters:[...u],filteredValue:o.client_type||null,filterSearch:!0,render:t=>{switch(t){case"Doimiy":return e.jsx(x,{color:"green",children:t});case"Tezkor":return e.jsx(x,{color:"red",children:t})}}},{title:r("Holati"),dataIndex:"status",key:"status",filters:[{text:r("To'langan"),value:"To'langan"},{text:"Qarzdorlik",value:"Qarzdorlik"}],filteredValue:o.status||null,render:t=>{switch(t){case"To'langan":return e.jsx(x,{color:"green",children:r("To'langan")});case"Qarzdorlik":return e.jsx(x,{color:"red",children:r("Qarzdorlik")})}}},{title:r("Qo'shilgan vaqti"),dataIndex:"added",key:"added",render:t=>e.jsx(e.Fragment,{children:D(t)})},{title:r("Izoh"),dataIndex:"desc",key:"desc",render:t=>e.jsx(e.Fragment,{children:t})},{title:r("Sana"),dataIndex:"deleted_at",key:"deleted_at",render:t=>e.jsx(e.Fragment,{children:D(t)})},{title:r("O'chirish kuni"),dataIndex:"deleted_range_day",key:"deleted_range_day",render:t=>e.jsx(e.Fragment,{children:E(t,r("kun"))})},{title:e.jsx(O,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:t=>e.jsxs(j,{align:"center",justify:"space-between",gap:"middle",children:[e.jsx(T,{trigger:e.jsx(F,{type:"primary",icon:e.jsx(q,{})}),onOk:()=>y(t)}),e.jsx(T,{trigger:e.jsx(F,{danger:!0,icon:e.jsx(U,{})}),onOk:()=>g(t)})]})}]},de=(n,o,d,l)=>{const{t:r}=p();z(),ne();const{productCategoriesOptions:u}=se(),s=ie(),g=k({mutationFn:ee,onSuccess:()=>{C(r("Muvaffaqiyatli bajarildi !")),l()},onError:a=>{console.log(a)}}),f=a=>{g.mutate(a)},y=k({mutationFn:te,onSuccess:()=>{C(r("Muvaffaqiyatli bajarildi !")),l()},onError:a=>{console.log(a)}}),t=a=>{y.mutate(a)};return[{title:"№",dataIndex:"id",key:"id",render:(a,m,I)=>e.jsx(e.Fragment,{children:(n.current-1)*n.pageSize+I+1})},{title:r("Nomi"),dataIndex:"name",key:"name"},{title:r("Narxi"),dataIndex:"price",key:"price",render:a=>e.jsx(e.Fragment,{children:E(a,"")})},{title:r("Kategoriya"),dataIndex:"category",key:"category_id",render:a=>e.jsx(e.Fragment,{children:K.get(a,"name","")}),filters:[...u],filteredValue:o.category_id||null,filterSearch:!0},{title:r("Mahsulot turi"),dataIndex:"product_type",key:"product_type",filters:[...s],filteredValue:o.product_type||null,filterSearch:!0,render:a=>{switch(a){case"Sanaladigan":return e.jsx(x,{color:"green",children:a});case"Sanalmaydigan":return e.jsx(x,{color:"red",children:a})}}},{title:r("Sana"),dataIndex:"deleted_at",key:"deleted_at",render:a=>e.jsx(e.Fragment,{children:D(a)})},{title:r("O'chish kuni"),dataIndex:"deleted_range_day",key:"deleted_range_day",render:a=>e.jsx(e.Fragment,{children:E(a,r("kun"))})},{title:e.jsx(O,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:a=>e.jsxs(j,{align:"center",justify:"space-between",gap:"middle",children:[e.jsx(T,{trigger:e.jsx(F,{type:"primary",icon:e.jsx(q,{})}),onOk:()=>t(a)}),e.jsx(T,{trigger:e.jsx(F,{danger:!0,icon:e.jsx(U,{})}),onOk:()=>f(a)})]})}]},qe=()=>{const{t:n}=p(),o=le();return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:n("O'chirilgan")})}),e.jsxs(S,{gutter:[20,20],children:[e.jsx(c,{span:24,children:e.jsx(j,{align:"center",justify:"space-between",children:e.jsx(Y,{children:n("O'chirilgan")})})}),e.jsx(c,{span:24,children:e.jsx(J,{items:o})}),e.jsx(c,{span:24,children:e.jsx(e.Fragment,{children:e.jsxs(X,{tabPosition:"top",children:[e.jsx(R.TabPane,{tab:n("Mahsulotlar"),children:e.jsx(ce,{})},"1"),e.jsx(R.TabPane,{tab:n("Mijozlar"),children:e.jsx(ue,{})},"2")]})})})]})]})},ce=()=>{p(),z();const[n,o]=h.useState({current:1,pageSize:10,total:null}),[d,l]=h.useState({}),[r,u]=h.useState(""),{data:s,isLoading:g,isError:f,error:y,isFetching:t,refetch:a,isRefetching:m,...I}=G({queryKey:["deleted-products",{page:n.current,pageSize:n.pageSize,filters:d}],queryFn:()=>re(n.current,n.pageSize,w({is_active:!0,...d})),select:i=>i.data,keepPreviousData:!0});h.useEffect(()=>{s&&o(i=>({...i,current:s.current||1,pageSize:s.pageSize||10,total:s.total||""}))},[s]);const b=(i,B)=>{o({...i}),l(B)},_=()=>{l({}),u("")},M=i=>{l({...d,search:i})},P=i=>{u(i.target.value)},v=de(n,d,l,()=>{a()});return e.jsx(e.Fragment,{children:e.jsx(S,{gutter:[20,20],children:e.jsx(c,{span:24,children:e.jsxs(S,{gutter:[20,20],children:[e.jsx(c,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(N,{value:r,enterButton:!0,onSearch:M,onChange:P})}),e.jsx(c,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsx(j,{align:"center",justify:"end",gap:"middle",children:e.jsx(Q,{onClick:_})})}),e.jsx(c,{span:24,children:e.jsx(L,{columns:v,data:(s==null?void 0:s.results)||[],pagination:n,loading:g||m,onChange:b})})]})})})})},ue=()=>{p(),z();const[n,o]=h.useState({current:1,pageSize:10,total:null}),[d,l]=h.useState({}),[r,u]=h.useState(""),{data:s,isLoading:g,isError:f,error:y,isFetching:t,refetch:a,isRefetching:m,...I}=G({queryKey:["deleted-products",{page:n.current,pageSize:n.pageSize,filters:d}],queryFn:()=>$(n.current,n.pageSize,w({is_active:!0,...d})),select:i=>i.data,keepPreviousData:!0});h.useEffect(()=>{s&&o(i=>({...i,current:s.current||1,pageSize:s.pageSize||10,total:s.total||""}))},[s]);const b=(i,B)=>{o({...i}),l(B)},_=()=>{l({}),u("")},M=i=>{l({...d,search:i})},P=i=>{u(i.target.value)},v=oe(n,d,l,()=>{a()});return e.jsx(e.Fragment,{children:e.jsx(S,{gutter:[20,20],children:e.jsx(c,{span:24,children:e.jsxs(S,{gutter:[20,20],children:[e.jsx(c,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(N,{value:r,enterButton:!0,onSearch:M,onChange:P})}),e.jsx(c,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsx(j,{align:"center",justify:"end",gap:"middle",children:e.jsx(Q,{onClick:_})})}),e.jsx(c,{span:24,children:e.jsx(L,{columns:v,data:(s==null?void 0:s.results)||[],pagination:n,loading:g||m,onChange:b})})]})})})})};export{qe as default};
