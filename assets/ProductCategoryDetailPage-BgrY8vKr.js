import{u as j,at as S,j as e,o as u,aX as z,U as M,ar as k,X as y,dU as K,l as L,r as m,aq as U}from"./index-TTKrRBsV.js";import{B as q}from"./BackButton-BLVW6gZr.js";import{G as D,C as G}from"./GlobalSearchInput-D1DeoeWx.js";import{C as I}from"./CreateButton-xdDnGHH7.js";import{C as A}from"./CustomDataTable-D2IlOEuA.js";import{P as N,E as O}from"./PageLoader-DmyE2ANN.js";import{P as _,B as w}from"./PageTitle-OKMYAOp7.js";import{T as Q}from"./TitleAndIconText-Dlp7yQ8-.js";import{d as X}from"./product-categories.requests-CmDVyG0I.js";import{b as H}from"./products.requests-D64CJ7hA.js";import{u as P}from"./useQuery-DXHJDm7O.js";import{u as J}from"./useProductColumns-DLAFvpM4.js";import{C as V}from"./CustomTabs-DeR7qKEd.js";import{R as x,C as n}from"./row-Bxwr5CQq.js";import{T as C}from"./index-CB8Qoy1w.js";import{C as W}from"./index-Chkbatr3.js";import"./LeftOutlined-30Vtg-fw.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./index-DVNdkQR1.js";import"./CustomModalConfirm-DuPb8srr.js";import"./DeleteFilled-Lrowix85.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./fade-m1HoRkfl.js";import"./useProductTypes-Dl-iJJ8n.js";import"./product-formats.requests-TWbBd2Xh.js";import"./index-Ce0i5KU3.js";import"./index-COnZReZT.js";import"./EditFilled-96y0AoAx.js";const Y=()=>{const{t:o}=j(),{id:s}=S();return[{title:e.jsxs(u,{align:"center",gap:"small",children:[e.jsx(z,{size:20}),e.jsx("span",{children:o("Mahsulot")})]})},{title:e.jsx(M,{to:"/products/category",children:o("Kategoriyalar")})},{title:s}]},Ue=()=>{const{id:o}=S(),{t:s}=j(),{data:c,isLoading:a,isError:p,error:i,isFetching:l,refetch:d,isRefetching:g,...r}=P({queryKey:["category-one",o],queryFn:()=>X(o),select:f=>f.data}),h=Y();return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx("title",{children:s("Kategoriya")})}),e.jsxs(x,{gutter:[20,20],children:[e.jsx(n,{span:24,children:e.jsxs(u,{align:"center",justify:"space-between",children:[e.jsx(_,{children:s("Kategoriya")}),e.jsx(q,{})]})}),e.jsx(n,{span:24,children:e.jsx(w,{items:h})}),e.jsx(n,{span:24,children:a?e.jsx(N,{}):e.jsx(e.Fragment,{children:i?e.jsx(O,{error:i}):e.jsx(e.Fragment,{children:e.jsxs(V,{tabPosition:"top",children:[e.jsx(C.TabPane,{tab:s("Umumiy ma'lumotlar"),children:e.jsx(W,{children:e.jsx(u,{vertical:!0,gap:"large",children:e.jsx(Q,{title:s("Kategoriya nomi").toUpperCase(),value:y.get(c,"name",""),icon:e.jsx(K,{})})})})},"1"),e.jsx(C.TabPane,{tab:s("Mahsulotlar"),children:e.jsx(Z,{category:y.get(c,"id",""),categoryRefetch:d})},"2")]})})})})]})]})},Z=({category:o,categoryRefetch:s})=>{j();const c=L(),[a,p]=m.useState({current:1,pageSize:10,total:null}),[i,l]=m.useState({}),[d,g]=m.useState(""),{data:r,isLoading:h,isError:f,error:$,isFetching:ee,refetch:te,isRefetching:b,...re}=P({queryKey:["product-categories",{page:a.current,pageSize:a.pageSize,filters:i}],queryFn:()=>H(a.current,a.pageSize,U({category:o,...i})),select:t=>t.data,keepPreviousData:!0});m.useEffect(()=>{r&&p(t=>({...t,current:r.current||1,pageSize:r.pageSize||10,total:r.total||""}))},[r]);const T=(t,v)=>{p({...t}),l(v)},B=()=>{l({}),g("")},F=t=>{l({...i,search:t})},E=t=>{g(t.target.value)},R=J(a,i).filter(t=>t.key!=="category");return e.jsx(e.Fragment,{children:e.jsx(x,{gutter:[20,20],children:e.jsx(n,{span:24,children:e.jsxs(x,{gutter:[20,20],children:[e.jsx(n,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(D,{value:d,enterButton:!0,onSearch:F,onChange:E})}),e.jsx(n,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(u,{align:"center",justify:"end",gap:"middle",children:[e.jsx(G,{onClick:B}),e.jsx(I,{onClick:()=>c("/products/products/create")})]})}),e.jsx(n,{span:24,children:e.jsx(A,{columns:R,data:(r==null?void 0:r.results)||[],pagination:a,loading:h||b,onChange:T})})]})})})})};export{Ue as default};
