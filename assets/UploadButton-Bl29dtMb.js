import{u as y,M as C,a2 as S,j as e,o as p,B as t,O as U,p as R,r as B}from"./index-TTKrRBsV.js";import{c as V,h as q,o as v,u as w,F as j,C as E}from"./index.esm-Dv3jW_V-.js";import{M as I}from"./DeleteFilled-Lrowix85.js";import{a as A,U as O,R as g}from"./UploadOutlined-BKXEKiN1.js";import{R as $,C as L}from"./row-Bxwr5CQq.js";const N=({isModalVisible:i,handleCancel:n,uploadRequest:l,refetch:c,ExampleFileUrl:u})=>{const{t:s}=y(),o=V().shape({file:q().required(s("Fayl kerak"))}),d=v(o),{control:f,formState:{errors:m},handleSubmit:h,setValue:F,reset:b}=w({resolver:d}),{isPending:P,mutateAsync:k}=C({mutationFn:l,onSuccess:()=>{S(s("Muvaffaqiyatli bajarildi !")),n(),b(),c()},onError:a=>{console.log(a)}}),x=a=>{var r;k({file:(r=a.file[0])==null?void 0:r.originFileObj})},M=a=>Array.isArray(a)?a:a&&a.fileList;return e.jsx(I,{title:s("Excel faylini yuklash"),open:i,onCancel:n,footer:[e.jsxs(p,{align:"center",justify:"space-between",children:[e.jsx(t,{type:"primary",icon:e.jsx(A,{}),href:u,download:!0,children:s("Namuna uchun")},"example"),e.jsxs(p,{align:"center",gap:"middle",children:[e.jsx(t,{onClick:n,children:s("Bekor qilish")},"cancel"),e.jsx(t,{type:"primary",onClick:h(x),children:s("Yuborish")},"submit")]})]})],children:e.jsx(j,{layout:"vertical",onFinish:h(x),style:{margin:"30px 0px"},children:e.jsx($,{gutter:[20,20],children:e.jsx(L,{span:24,children:e.jsx(j.Item,{label:s("Fayl"),...U(m,"file"),required:!0,children:e.jsx(E,{name:"file",control:f,defaultValue:[],render:({field:a})=>e.jsx(O,{name:"file",beforeUpload:()=>!1,fileList:a.value,onChange:r=>F("file",M(r)),children:e.jsx(t,{icon:e.jsx(g,{}),children:s("Faylni tanlang")})})})})})})})})},Y=R(t)``,J=({uploadRequest:i,refetch:n,ExampleFileUrl:l,...c})=>{const{t:u}=y(),[s,o]=B.useState(!1),d=()=>{o(!0)},f=()=>{o(!1)},m=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{icon:e.jsx(g,{}),onClick:d,...c,children:u("Yuklash")}),e.jsx(N,{isModalVisible:s,handleCancel:f,handleOk:m,uploadRequest:i,refetch:n,ExampleFileUrl:l})]})};export{J as U};
