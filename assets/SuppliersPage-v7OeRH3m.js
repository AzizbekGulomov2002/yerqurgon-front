import{u as f,j as e,o as x,aY as E,l as C,M,a2 as Q,aI as q,aQ as D,B as j,r as d,aq as P,ar as w}from"./index-TTKrRBsV.js";import{G as U,C as _}from"./GlobalSearchInput-D1DeoeWx.js";import{C as G}from"./CreateButton-xdDnGHH7.js";import{C as L}from"./CustomDataTable-D2IlOEuA.js";import{P as N,B as O}from"./PageTitle-OKMYAOp7.js";import{U as $}from"./UploadButton-Bl29dtMb.js";import{b as A,c as H,d as J}from"./suppliers.requests-CZGt-cgQ.js";import{u as V}from"./useQuery-DXHJDm7O.js";import{C as K}from"./CustomModalConfirm-DuPb8srr.js";import{u as Y}from"./useSupplierTypes-D9hZVEYZ.js";import{T as m}from"./index-Ce0i5KU3.js";import{R as W}from"./EyeFilled-oI1XtQGU.js";import{R as X}from"./EditFilled-96y0AoAx.js";import{R as Z}from"./DeleteFilled-Lrowix85.js";import{P as ee}from"./PageResult-BMOmKs_e.js";import{R as y,C as l}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./index.esm-Dv3jW_V-.js";import"./UploadOutlined-BKXEKiN1.js";import"./fade-m1HoRkfl.js";import"./progress-0PFtpCVW.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./PageLoader-DmyE2ANN.js";import"./index-Chkbatr3.js";import"./index-CB8Qoy1w.js";import"./index-DVNdkQR1.js";const te="/assets/Supplier_example-jJBaBJCE.xlsx",re=()=>{const{t:s}=f();return[{title:e.jsxs(x,{align:"center",gap:"small",children:[e.jsx(E,{size:20}),e.jsx("span",{children:s("Omborxona")})]})},{title:s("Ta'minotchilar")}]},ae=(s,c,n,u)=>{const{t:r}=f(),i=C(),h=Y(),p=M({mutationFn:A,onSuccess:()=>{Q(r("Muvaffaqiyatli bajarildi !")),u()},onError:t=>{console.log(t)}}),a=t=>{p.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id",render:(t,T,g)=>e.jsx(e.Fragment,{children:(s.current-1)*s.pageSize+g+1})},{title:r("Nomi"),dataIndex:"name",key:"name"},{title:r("Telefon raqami"),dataIndex:"phone",key:"phone",render:t=>e.jsx(e.Fragment,{children:t})},{title:r("Ta'minotchi turi"),dataIndex:"supplier_type",key:"supplier_type",filters:[...h],filteredValue:c.supplier_type||null,filterSearch:!0,render:t=>{switch(t){case"Doimiy":return e.jsx(m,{color:"green",children:r("Doimiy")});case"Tezkor":return e.jsx(m,{color:"red",children:r("Tezkor")})}}},{title:r("Holati"),dataIndex:"status",key:"status",filters:[{text:r("Qarzdorlik"),value:"Qarzdorlik"},{text:r("To'langan"),value:"To'langan"}],filteredValue:c.status||null,filterSearch:!0,render:t=>{switch(t){case"To'langan":return e.jsx(m,{color:"green",children:r("To'langan")});case"Qarzdorlik":return e.jsx(m,{color:"red",children:r("Qarzdorlik")})}}},{title:r("Qo'shilgan vaqti"),dataIndex:"added",key:"added",render:t=>e.jsx(e.Fragment,{children:q(t)})},{title:r("Izoh"),dataIndex:"desc",key:"desc",render:t=>e.jsx(e.Fragment,{children:t}),hidden:!0},{title:e.jsx(D,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:t=>e.jsxs(x,{align:"center",justify:"space-between",gap:"middle",children:[e.jsx(j,{type:"primary",onClick:()=>i(`${t}`),icon:e.jsx(W,{})}),e.jsx(j,{onClick:()=>i(`update/${t}`),icon:e.jsx(X,{})}),e.jsx(K,{trigger:e.jsx(j,{danger:!0,icon:e.jsx(Z,{})}),onOk:()=>a(t)})]})}]},we=()=>{const{t:s}=f(),c=C(),[n,u]=d.useState({current:1,pageSize:10,total:null}),[r,i]=d.useState({}),[h,p]=d.useState(""),{data:a,isLoading:t,isError:T,error:g,isFetching:se,refetch:S,isRefetching:k,...ne}=V({queryKey:["suppliers",{page:n.current,pageSize:n.pageSize,filters:r}],queryFn:()=>H(n.current,n.pageSize,P(r)),select:o=>o.data,keepPreviousData:!0});d.useEffect(()=>{a&&u({current:a.current||1,pageSize:a.pageSize||10,total:a.total||""})},[a]);const I=(o,v)=>{u({...o}),i(v)},z=()=>{i({}),p("")},F=o=>{i({...r,search:o})},B=o=>{p(o.target.value)},R=ae(n,r,i,S),b=re();return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("title",{children:s("Ta'minotchilar")})}),e.jsxs(y,{gutter:[20,20],children:[e.jsx(l,{span:24,children:e.jsx(x,{align:"center",justify:"space-between",children:e.jsx(N,{children:s("Ta'minotchilar")})})}),e.jsx(l,{span:24,children:e.jsx(O,{items:b})}),e.jsx(l,{span:24,children:e.jsx(ee,{isLoading:t,error:g,children:e.jsxs(y,{gutter:[20,20],children:[e.jsx(l,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(U,{value:h,enterButton:!0,onSearch:F,onChange:B})}),e.jsx(l,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(x,{align:"center",justify:"end",gap:"middle",children:[e.jsx($,{uploadRequest:J,refetch:S,ExampleFileUrl:te}),e.jsx(_,{onClick:z}),e.jsx(G,{onClick:()=>c("create")})]})}),e.jsx(l,{span:24,children:e.jsx(L,{columns:R,data:(a==null?void 0:a.results)||[],pagination:n,loading:t||k,onChange:I})})]})})})]})]})};export{we as default};
