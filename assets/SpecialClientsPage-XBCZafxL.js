import{u as S,j as e,o as h,aS as E,l as T,M as z,a2 as Q,aI as q,aQ as D,X as _,B as d,aT as L,aU as P,r as p,aq as w,ar as N}from"./index-TTKrRBsV.js";import{G as U,C as $}from"./GlobalSearchInput-D1DeoeWx.js";import{C as G}from"./CustomDataTable-D2IlOEuA.js";import{P as O,B as A}from"./PageTitle-OKMYAOp7.js";import{a as H,b as V,c as K}from"./clients.requests-DE0ZkmW1.js";import{u as X}from"./useQuery-DXHJDm7O.js";import{C as J}from"./CustomModalConfirm-DuPb8srr.js";import{u as W}from"./useClientTypes-BFb73J4y.js";import{T as x}from"./index-Ce0i5KU3.js";import{R as Y}from"./EyeFilled-oI1XtQGU.js";import{R as Z}from"./EditFilled-96y0AoAx.js";import{R as ee}from"./DeleteFilled-Lrowix85.js";import{R as k,C as c}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./fade-m1HoRkfl.js";const te=()=>{const{t:s}=S();return[{title:e.jsxs(h,{align:"center",gap:"small",children:[e.jsx(E,{size:20}),e.jsx("span",{children:s("Mijozlar")})]})},{title:s("Maxsus mijozlar")}]},ae=(s,n,g,i)=>{const{t:a}=S(),u=T(),m=W(),r=z({mutationFn:H,onSuccess:()=>{Q(a("Muvaffaqiyatli bajarildi !")),i()},onError:t=>{console.log(t)}}),j=t=>{r.mutate(t)},y=z({mutationFn:V,onSuccess:()=>{i()},onError:t=>{console.log(t)}}),f=async t=>{y.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id",render:(t,o,C)=>e.jsx(e.Fragment,{children:(s.current-1)*s.pageSize+C+1})},{title:a("Nomi"),dataIndex:"name",key:"name"},{title:a("Telefon raqami"),dataIndex:"phone",key:"phone",render:t=>e.jsx(e.Fragment,{children:t})},{title:a("Mijoz turi"),dataIndex:"client_type",filters:[...m],filteredValue:n.client_type||null,filterSearch:!0,render:t=>{switch(t){case"Doimiy":return e.jsx(x,{color:"green",children:t});case"Tezkor":return e.jsx(x,{color:"red",children:t})}}},{title:a("Holati"),dataIndex:"status",key:"status",filters:[{text:a("To'langan"),value:"To'langan"},{text:"Qarzdorlik",value:"Qarzdorlik"}],filteredValue:n.status||null,render:t=>{switch(t){case"To'langan":return e.jsx(x,{color:"green",children:a("To'langan")});case"Qarzdorlik":return e.jsx(x,{color:"red",children:a("Qarzdorlik")})}}},{title:a("Qo'shilgan vaqti"),dataIndex:"added",key:"added",render:t=>e.jsx(e.Fragment,{children:q(t)})},{title:a("Izoh"),dataIndex:"desc",key:"desc",render:t=>e.jsx(e.Fragment,{children:t})},{title:e.jsx(D,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:(t,o)=>e.jsxs(h,{align:"center",justify:"space-between",gap:"middle",children:[_.get(o,"is_special",!1)===!0?e.jsx(e.Fragment,{children:e.jsx(d,{type:"primary",icon:e.jsx(L,{}),onClick:()=>f({client:o.id,is_special:!1})})}):e.jsx(e.Fragment,{children:e.jsx(d,{type:"primary",icon:e.jsx(P,{}),onClick:()=>f({client:o.id,is_special:!0})})}),e.jsx(d,{type:"primary",icon:e.jsx(Y,{}),onClick:()=>u(`/clients/clients/${t}`)}),e.jsx(d,{onClick:()=>u(`/clients/clients/update/${t}`),icon:e.jsx(Z,{})}),e.jsx(J,{trigger:e.jsx(d,{danger:!0,icon:e.jsx(ee,{})}),onOk:()=>j(t)})]})}]},Te=()=>{const{t:s}=S();T();const[n,g]=p.useState({current:1,pageSize:10,total:null}),[i,a]=p.useState({}),[u,m]=p.useState(""),{data:r,isLoading:j,isError:y,error:f,isFetching:t,refetch:o,isRefetching:C,...re}=X({queryKey:["clients",{page:n.current,pageSize:n.pageSize,filters:i}],queryFn:()=>K(n.current,n.pageSize,w({is_special:!0,...i})),select:l=>l.data,keepPreviousData:!0});p.useEffect(()=>{r&&g({current:r.current||1,pageSize:r.pageSize||10,total:r.total||""})},[r]);const F=(l,B)=>{g({...l}),a(B)},I=()=>{a({}),m("")},M=l=>{a({...i,search:l})},R=l=>{m(l.target.value)},b=ae(n,i,a,o),v=te();return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:s("Maxsus mijozlar")})}),e.jsxs(k,{gutter:[20,20],children:[e.jsx(c,{span:24,children:e.jsx(h,{align:"center",justify:"space-between",children:e.jsx(O,{children:s("Maxsus mijozlar")})})}),e.jsx(c,{span:24,children:e.jsx(A,{items:v})}),e.jsx(c,{span:24,children:e.jsxs(k,{gutter:[20,20],children:[e.jsx(c,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(U,{value:u,placeholder:s("Qidiruv"),enterButton:!0,onSearch:M,onChange:R})}),e.jsx(c,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsx(h,{align:"center",justify:"end",gap:"middle",children:e.jsx($,{onClick:I})})}),e.jsx(c,{span:24,children:e.jsx(G,{columns:b,data:(r==null?void 0:r.results)||[],pagination:n,loading:j||C,onChange:F})})]})})]})]})};export{Te as default};
