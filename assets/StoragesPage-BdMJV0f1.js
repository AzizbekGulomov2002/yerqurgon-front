import{u as g,j as e,o as p,aY as M,l as C,M as v,a2 as O,aQ as P,B as x,r as m,aq as T,ar as q}from"./index-TTKrRBsV.js";import{G as D,C as U}from"./GlobalSearchInput-D1DeoeWx.js";import{C as w}from"./CreateButton-xdDnGHH7.js";import{C as G}from"./CustomDataTable-D2IlOEuA.js";import{P as L,B as N}from"./PageTitle-OKMYAOp7.js";import{U as Q}from"./UploadButton-Bl29dtMb.js";import{h as _,a as $,b as A}from"./storages.requests-Clr69Zlx.js";import{u as H}from"./useQuery-DXHJDm7O.js";import{C as K}from"./CustomModalConfirm-DuPb8srr.js";import{R as Y}from"./EyeFilled-oI1XtQGU.js";import{R as J}from"./EditFilled-96y0AoAx.js";import{R as V}from"./DeleteFilled-Lrowix85.js";import{P as W}from"./PageResult-BMOmKs_e.js";import{R as S,C as i}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./index.esm-Dv3jW_V-.js";import"./UploadOutlined-BKXEKiN1.js";import"./fade-m1HoRkfl.js";import"./progress-0PFtpCVW.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./PageLoader-DmyE2ANN.js";import"./index-Chkbatr3.js";import"./index-CB8Qoy1w.js";import"./index-DVNdkQR1.js";const X="/assets/Storage_example-CQcRlFtR.xlsx",Z=()=>{const{t:r}=g();return[{title:e.jsxs(p,{align:"center",gap:"small",children:[e.jsx(M,{size:20}),e.jsx("span",{children:r("Omborxona")})]})},{title:r("Omborxonalar")}]},ee=(r,h,s,l)=>{const{t:a}=g(),n=C(),u=v({mutationFn:_,onSuccess:()=>{O(a("Muvaffaqiyatli bajarildi !")),l()},onError:t=>{console.log(t)}}),c=t=>{u.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id",render:(t,d,j)=>e.jsx(e.Fragment,{children:(r.current-1)*r.pageSize+j+1})},{title:a("Nomi"),dataIndex:"name",key:"name"},{title:e.jsx(P,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:t=>e.jsxs(p,{align:"center",justify:"space-between",gap:"middle",children:[e.jsx(x,{type:"primary",icon:e.jsx(Y,{})}),e.jsx(x,{onClick:()=>n(`update/${t}`),icon:e.jsx(J,{})}),e.jsx(K,{trigger:e.jsx(x,{danger:!0,icon:e.jsx(V,{})}),onOk:()=>c(t)})]})}]},Oe=()=>{const{t:r}=g(),h=C(),[s,l]=m.useState({current:1,pageSize:10,total:null}),[a,n]=m.useState({}),[u,c]=m.useState(""),{data:t,isLoading:d,isError:j,error:R,isFetching:te,refetch:f,isRefetching:b,...re}=H({queryKey:["storages",{page:s.current,pageSize:s.pageSize,filters:a}],queryFn:()=>$(s.current,s.pageSize,T(a)),select:o=>o.data,keepPreviousData:!0});m.useEffect(()=>{t&&l({current:t.current||1,pageSize:t.pageSize||10,total:t.total||""})},[t]);const y=(o,k)=>{l({...o}),n(k)},B=()=>{n({}),c("")},F=o=>{n({...a,search:o})},z=o=>{c(o.target.value)},I=ee(s,a,n,f),E=Z();return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsx("title",{children:r("Omborxonalar")})}),e.jsxs(S,{gutter:[20,20],children:[e.jsx(i,{span:24,children:e.jsx(p,{align:"center",justify:"space-between",children:e.jsx(L,{children:r("Omborxonalar")})})}),e.jsx(i,{span:24,children:e.jsx(N,{items:E})}),e.jsx(i,{span:24,children:e.jsx(W,{isLoading:d,error:R,children:e.jsxs(S,{gutter:[20,20],children:[e.jsx(i,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(D,{value:u,enterButton:!0,onSearch:F,onChange:z})}),e.jsx(i,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(p,{align:"center",justify:"end",gap:"middle",children:[e.jsx(Q,{uploadRequest:A,refetch:f,ExampleFileUrl:X}),e.jsx(U,{onClick:B}),e.jsx(w,{onClick:()=>h("create")})]})}),e.jsx(i,{span:24,children:e.jsx(G,{columns:I,data:(t==null?void 0:t.results)||[],pagination:s,loading:d||b,onChange:y})})]})})})]})]})};export{Oe as default};
