import{u as x,j as e,o as u,aX as M,l as C,M as k,a2 as E,aB as T,aQ as q,B as d,r as m,aq as N,ar as D}from"./index-TTKrRBsV.js";import{G as P,C as U}from"./GlobalSearchInput-D1DeoeWx.js";import{C as w}from"./CreateButton-xdDnGHH7.js";import{C as L}from"./CustomDataTable-D2IlOEuA.js";import{P as X,B as A}from"./PageTitle-OKMYAOp7.js";import{U as G}from"./UploadButton-Bl29dtMb.js";import{h as O,a as Q,b as _}from"./services.requests-CprgZdT8.js";import{u as $}from"./useQuery-DXHJDm7O.js";import{C as H}from"./CustomModalConfirm-DuPb8srr.js";import{R as J}from"./EyeFilled-oI1XtQGU.js";import{R as K}from"./EditFilled-96y0AoAx.js";import{R as V}from"./DeleteFilled-Lrowix85.js";import{R as S,C as o}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./index.esm-Dv3jW_V-.js";import"./UploadOutlined-BKXEKiN1.js";import"./fade-m1HoRkfl.js";import"./progress-0PFtpCVW.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";const W="/assets/Service_example-Bbbl-8Jq.xlsx",Y=()=>{const{t:r}=x();return[{title:e.jsxs(u,{align:"center",gap:"small",children:[e.jsx(M,{size:20}),e.jsx("span",{children:r("Asosiy")})]})},{title:r("Xizmatlar")}]},Z=(r,g,a,l)=>{const{t:s}=x(),i=C(),p=k({mutationFn:O,onSuccess:()=>{E(s("Muvaffaqiyatli bajarildi !")),l()},onError:t=>{console.log(t)}}),c=t=>{p.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id",render:(t,h,j)=>e.jsx(e.Fragment,{children:(r.current-1)*r.pageSize+j+1})},{title:s("Nomi"),dataIndex:"name",key:"name"},{title:s("Narxi"),dataIndex:"price",key:"price",render:t=>e.jsx(e.Fragment,{children:T(t,"")})},{title:e.jsx(q,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:t=>e.jsxs(u,{align:"center",justify:"space-between",gap:"middle",children:[e.jsx(d,{type:"primary",icon:e.jsx(J,{})}),e.jsx(d,{onClick:()=>i(`update/${t}`),icon:e.jsx(K,{})}),e.jsx(H,{trigger:e.jsx(d,{danger:!0,icon:e.jsx(V,{})}),onOk:()=>c(t)})]})}]},Re=()=>{const{t:r}=x(),g=C(),[a,l]=m.useState({current:1,pageSize:10,total:null}),[s,i]=m.useState({}),[p,c]=m.useState(""),{data:t,isLoading:h,isError:j,error:ee,isFetching:te,refetch:f,isRefetching:y,...re}=$({queryKey:["services",{page:a.current,pageSize:a.pageSize,filters:s}],queryFn:()=>Q(a.current,a.pageSize,N(s)),select:n=>n.data,keepPreviousData:!0});m.useEffect(()=>{t&&l({current:t.current||1,pageSize:t.pageSize||10,total:t.total||""})},[t]);const v=(n,I)=>{l({...n}),i(I)},B=()=>{i({}),c("")},b=n=>{i({...s,search:n})},z=n=>{c(n.target.value)},F=Z(a,s,i,f),R=Y();return console.log(t),e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:r("Xizmatlar")})}),e.jsxs(S,{gutter:[20,20],children:[e.jsx(o,{span:24,children:e.jsx(u,{align:"center",justify:"space-between",children:e.jsx(X,{children:r("Xizmatlar")})})}),e.jsx(o,{span:24,children:e.jsx(A,{items:R})}),e.jsx(o,{span:24,children:e.jsxs(S,{gutter:[20,20],children:[e.jsx(o,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(P,{value:p,enterButton:!0,onSearch:b,onChange:z})}),e.jsx(o,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(u,{align:"center",justify:"end",gap:"middle",children:[e.jsx(G,{uploadRequest:_,refetch:f,ExampleFileUrl:W}),e.jsx(U,{onClick:B}),e.jsx(w,{onClick:()=>g("create")})]})}),e.jsx(o,{span:24,children:e.jsx(L,{columns:F,data:(t==null?void 0:t.results)||[],pagination:a,loading:h||y,onChange:v})})]})})]})]})};export{Re as default};
