import{u as h,j as e,o as m,aY as k,l as S,M as E,a2 as I,X as O,aB as T,aQ as q,B as f,r as d,aq as v,ar as D}from"./index-TTKrRBsV.js";import{G as w,C as G}from"./GlobalSearchInput-D1DeoeWx.js";import{C as L}from"./CreateButton-xdDnGHH7.js";import{C as N}from"./CustomDataTable-D2IlOEuA.js";import{P as Y,B as Q}from"./PageTitle-OKMYAOp7.js";import{h as A,a as U}from"./storage-products-off.requests-DDlJw5ka.js";import{u as _}from"./useQuery-DXHJDm7O.js";import{C as $}from"./CustomModalConfirm-DuPb8srr.js";import{u as H}from"./useProducts-TVEJRWTV.js";import{R as K}from"./EditFilled-96y0AoAx.js";import{R as V}from"./DeleteFilled-Lrowix85.js";import{R as j,C as l}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./products.requests-D64CJ7hA.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./fade-m1HoRkfl.js";const X=()=>{const{t:n}=h();return[{title:e.jsxs(m,{align:"center",gap:"small",children:[e.jsx(k,{size:20}),e.jsx("span",{children:n("Omborxona")})]})},{title:n("Yaroqsiz mahsulotlar")}]},J=(n,p,o,c)=>{const{t:a}=h(),i=S(),{productsOptions:g}=H(),u=E({mutationFn:A,onSuccess:()=>{I(a("Muvaffaqiyatli bajarildi !")),c()},onError:t=>{console.log(t)}}),r=t=>{u.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id"},{title:a("Mahsulot"),dataIndex:"product",key:"product",render:t=>e.jsx(e.Fragment,{children:O.get(t,"name","")}),filters:[...g],filteredValue:p.product||null,filterSearch:!0,hidden:!1},{title:a("Miqdori"),dataIndex:"count",key:"count",render:(t,x)=>e.jsx(e.Fragment,{children:T(t,x.product.format)})},{title:e.jsx(q,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:t=>e.jsxs(m,{align:"center",justify:"space-between",gap:"middle",children:[e.jsx(f,{onClick:()=>i(`update/${t}`),icon:e.jsx(K,{})}),e.jsx($,{trigger:e.jsx(f,{danger:!0,icon:e.jsx(V,{})}),onOk:()=>r(t)})]})}]},ze=()=>{const{t:n}=h(),p=S(),[o,c]=d.useState({current:1,pageSize:10,total:null}),[a,i]=d.useState({}),[g,u]=d.useState(""),{data:r,isLoading:t,isError:x,error:W,isFetching:Z,refetch:C,isRefetching:y,...ee}=_({queryKey:["storage-products-off",{page:o.current,pageSize:o.pageSize,filters:a}],queryFn:()=>U(o.current,o.pageSize,v(a)),select:s=>s.data,keepPreviousData:!0});d.useEffect(()=>{r&&c(s=>({...s,current:r.current||1,pageSize:r.pageSize||10,total:r.total||""}))},[r]);const z=(s,R)=>{c({...s}),i(R)},B=()=>{i({}),u("")},F=s=>{i({...a,search:s})},b=s=>{u(s.target.value)},M=J(o,a,i,C),P=X();return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:n("Yaroqsiz mahsulotlar")})}),e.jsxs(j,{gutter:[20,20],children:[e.jsx(l,{span:24,children:e.jsx(m,{align:"center",justify:"space-between",children:e.jsx(Y,{children:n("Yaroqsiz mahsulotlar")})})}),e.jsx(l,{span:24,children:e.jsx(Q,{items:P})}),e.jsx(l,{span:24,children:e.jsxs(j,{gutter:[20,20],children:[e.jsx(l,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(w,{value:g,enterButton:!0,onSearch:F,onChange:b})}),e.jsx(l,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(m,{align:"center",justify:"end",gap:"middle",children:[e.jsx(G,{onClick:B}),e.jsx(L,{onClick:()=>p("create")})]})}),e.jsx(l,{span:24,children:e.jsx(N,{columns:M,data:(r==null?void 0:r.results)||[],pagination:o,loading:t||y,onChange:z})})]})})]})]})};export{ze as default};
