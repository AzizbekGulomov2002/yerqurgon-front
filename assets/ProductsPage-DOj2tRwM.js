import{u,j as e,o as p,aX as k,p as x,V as f,L as z,X as j,aB as E,l as U,r as d,aq as w,ar as L,B as N}from"./index-TTKrRBsV.js";import{G as _,C as q}from"./GlobalSearchInput-D1DeoeWx.js";import{C as D}from"./CreateButton-xdDnGHH7.js";import{C as G}from"./CustomDataTable-D2IlOEuA.js";import{P as Q,B as X}from"./PageTitle-OKMYAOp7.js";import{U as A}from"./UploadButton-Bl29dtMb.js";import{b as K,c as O}from"./products.requests-D64CJ7hA.js";import{u as H}from"./useQuery-DXHJDm7O.js";import{u as V}from"./useProductColumns-DLAFvpM4.js";import{R as J}from"./index-Jp31-sNK.js";import{R as m,C as o}from"./row-Bxwr5CQq.js";import{F as W}from"./Table-DaguqWZh.js";import{u as Y}from"./useProducts-TVEJRWTV.js";import{R as Z}from"./PrinterOutlined-DYf3p5xo.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./index.esm-Dv3jW_V-.js";import"./DeleteFilled-Lrowix85.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./fade-m1HoRkfl.js";import"./UploadOutlined-BKXEKiN1.js";import"./progress-0PFtpCVW.js";import"./CustomModalConfirm-DuPb8srr.js";import"./useProductTypes-Dl-iJJ8n.js";import"./product-categories.requests-CmDVyG0I.js";import"./product-formats.requests-TWbBd2Xh.js";import"./index-Ce0i5KU3.js";import"./index-COnZReZT.js";import"./LeftOutlined-30Vtg-fw.js";import"./EditFilled-96y0AoAx.js";const $="/assets/Product_example-nndUxX7x.xlsx",ee=()=>{const{t}=u();return[{title:e.jsxs(p,{align:"center",gap:"small",children:[e.jsx(k,{size:20}),e.jsx("span",{children:t("Mahsulot")})]})},{title:t("Mahsulotlar")}]},{Title:te,Text:De}=f;x.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`;x.div`
  display: flex;
  gap: 5px;
`;x(f.Text)`
  font-weight: bold;
`;const re=({data:t,componentRef:r})=>{const{t:s}=u();return e.jsx("div",{style:{display:"none"},children:e.jsx("div",{ref:r,children:e.jsxs(m,{gutter:[20,20],children:[e.jsx(o,{span:24,children:e.jsxs(p,{vertical:!0,align:"center",justify:"center",gap:"15px",children:[e.jsx("img",{src:z,alt:"",style:{width:"150px"}}),e.jsx(te,{level:4,align:"center",children:s("Mahsulotlar")})]})}),e.jsx(o,{span:24,children:e.jsx(se,{data:t})})]})})})};function se({data:t}){const{t:r}=u(),s=[{title:r("#"),dataIndex:"index",key:"index",render:(a,l,c)=>e.jsx(e.Fragment,{children:c+1})},{title:r("Nomi"),dataIndex:"name",key:"name"},{title:r("Kategoriya"),dataIndex:"category",key:"category",render:a=>e.jsx(e.Fragment,{children:j.get(a,"name","")})},{title:r("Mahsulot turi"),dataIndex:"product_type",key:"product_type"},{title:r("Format"),dataIndex:"format",key:"format",render:a=>e.jsx(e.Fragment,{children:j.get(a,"name","")})},{title:r("Narxi"),dataIndex:"price",key:"price",render:a=>e.jsx(e.Fragment,{children:E(a)})}];return e.jsx(W,{size:"small",dataSource:t,columns:s,pagination:!1})}const Ge=()=>{const{t}=u(),r=U(),[s,a]=d.useState({current:1,pageSize:10,total:null}),[l,c]=d.useState({}),[y,g]=d.useState(""),{data:n,isLoading:C,isError:ae,error:ne,isFetching:oe,refetch:S,isRefetching:F,...ie}=H({queryKey:["products",{page:s.current,pageSize:s.pageSize,filters:l}],queryFn:()=>K(s.current,s.pageSize,w(l)),select:i=>i.data,keepPreviousData:!0});d.useEffect(()=>{n&&a({current:n.current||1,pageSize:n.pageSize||10,total:n.total||""})},[n]);const P=(i,M)=>{a({...i}),c(M)},T=()=>{c({}),g("")},b=i=>{c({...l,search:i})},v=i=>{g(i.target.value)},B=V(s,l),R=ee(),{productsData:I}=Y(),h=d.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsx("title",{children:t("Mahsulotlar")})}),e.jsxs(m,{gutter:[20,20],children:[e.jsx(o,{span:24,children:e.jsx(p,{align:"center",justify:"space-between",children:e.jsx(Q,{children:t("Mahsulotlar")})})}),e.jsx(o,{span:24,children:e.jsx(X,{items:R})}),e.jsx(o,{span:24,children:e.jsxs(m,{gutter:[20,20],children:[e.jsx(o,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(_,{value:y,placeholder:t("Qidiruv"),enterButton:!0,onSearch:b,onChange:v})}),e.jsx(o,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(p,{align:"center",justify:"end",gap:"middle",children:[e.jsx(re,{data:I,componentRef:h}),e.jsx(J,{pageStyle:"@page { size: 80mm 100%; margin: 20px; padding: 0px; } body {  margin: 20px; padding: 0px; }",bodyClass:"print",trigger:()=>e.jsx(N,{icon:e.jsx(Z,{}),children:t("Chop etish")}),content:()=>h.current}),e.jsx(A,{uploadRequest:O,refetch:S,ExampleFileUrl:$}),e.jsx(q,{onClick:T}),e.jsx(D,{onClick:()=>r("create")})]})}),e.jsx(o,{span:24,children:e.jsx(G,{columns:B,data:(n==null?void 0:n.results)||[],pagination:s,loading:C||F,onChange:P})})]})})]})]})};export{Ge as default};
