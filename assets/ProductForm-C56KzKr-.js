import{u as O,r as b,aw as N,X as m,j as e,O as n,C as x,B as h,o as P}from"./index-TTKrRBsV.js";import{C as D}from"./CustomInputNumber-BoiyYvjJ.js";import{C as _}from"./CustomInput-CfXd1HaZ.js";import{u as E,a as U,b as B}from"./useProductTypes-Dl-iJJ8n.js";import{c as L,a as p,e as $,u as A,F as a,C as d,o as K}from"./index.esm-Dv3jW_V-.js";import{D as C}from"./index-CwYkfvr8.js";import{R as X,C as c}from"./row-Bxwr5CQq.js";import{U as Y,R as G}from"./UploadOutlined-BKXEKiN1.js";const se=({defaultValues:u,handleSubmit:F,actionLoading:j=!1,readOnly:H=!1})=>{const{t}=O(),[l,g]=b.useState([]),q=r=>{const s=r.fileList.slice(-1);g(s)},{company:{currency_type:I}}=N(),k=L().shape({category_id:p().required(t("Maydonni kiritishingiz shart !")),format_id:p().required(t("Maydonni kiritishingiz shart !")),product_type:p().required(t("Maydonni kiritishingiz shart !")),name:p().required(t("Maydonni kiritishingiz shart !")),price:$().min(0,t("Narx noldan katta yoki teng bo'lishi kerak !")).required(t("Maydonni kiritishingiz shart !"))}),S=K(k),{productCategoriesOptions:T}=E(),{productFormatsOptions:z}=U(),R=B(),{control:i,formState:{errors:o},reset:y,watch:J,...w}=A({defaultValues:u,resolver:S});b.useEffect(()=>{y(u)},[u]);const f=()=>{y({}),g([])},M=w.handleSubmit(async r=>{const s=new FormData;s.append("name",m.get(r,"name","")),s.append("category_id",m.get(r,"category_id","")),s.append("format_id",m.get(r,"format_id","")),s.append("price",m.get(r,"price","")),s.append("product_type",m.get(r,"product_type","")),s.append("bar_code",m.get(r,"bar_code","")),l.length>0&&l[0].originFileObj&&s.append("image",l[0].originFileObj),F(s,f)});return e.jsxs(a,{layout:"vertical",className:"create-form",name:"create-form",size:"large",onFinish:M,children:[e.jsx(C,{}),e.jsxs(X,{gutter:[20,20],children:[e.jsx(c,{xs:24,md:6,children:e.jsx(a.Item,{label:t("Nomi"),...n(o,"name"),required:!0,children:e.jsx(d,{name:"name",control:i,render:({field:r})=>e.jsx(_,{...r})})})}),e.jsx(c,{xs:24,md:6,children:e.jsx(a.Item,{label:t("Kategoriya"),...n(o,"category_id"),required:!0,children:e.jsx(d,{name:"category_id",control:i,render:({field:r})=>e.jsx(x,{options:T,...r})})})}),e.jsx(c,{xs:24,md:6,children:e.jsx(a.Item,{label:t("Format"),...n(o,"format_id"),required:!0,children:e.jsx(d,{name:"format_id",control:i,render:({field:r})=>e.jsx(x,{options:z,...r})})})}),e.jsx(c,{xs:24,md:6,children:e.jsx(a.Item,{label:t("Narxi"),...n(o,"price"),required:!0,children:e.jsx(d,{name:"price",control:i,render:({field:r})=>e.jsx(D,{addonAfter:I,...r})})})}),e.jsx(c,{xs:24,md:6,children:e.jsx(a.Item,{label:t("Mahsulot turi"),...n(o,"product_type"),required:!0,children:e.jsx(d,{name:"product_type",control:i,render:({field:r})=>e.jsx(x,{showSearch:!1,options:R,...r})})})}),e.jsx(c,{xs:24,md:6,children:e.jsx(a.Item,{label:t("Barcode"),...n(o,"bar_code"),children:e.jsx(d,{name:"bar_code",control:i,render:({field:r})=>e.jsx(_,{...r})})})}),e.jsx(c,{xs:24,md:6,children:e.jsx(a.Item,{label:t("Rasm"),...n(o,"image"),required:!1,children:e.jsx(d,{name:"image",defaultValue:[],control:i,render:({field:r})=>e.jsx(Y,{listType:"picture",maxCount:1,accept:"image/*",fileList:l,onChange:q,beforeUpload:s=>(r.onChange([s]),!1),children:e.jsx(h,{icon:e.jsx(G,{}),children:t("Tanlang")})})})})})]}),e.jsx(C,{}),e.jsx(a.Item,{children:e.jsxs(P,{align:"center",justify:"end",gap:"middle",children:[e.jsx(h,{htmlType:"button",onClick:f,children:t("Tozalash")}),e.jsx(h,{type:"primary",htmlType:"submit",loading:j,disabled:j,children:t("Yuborish")})]})})]})};export{se as P};
