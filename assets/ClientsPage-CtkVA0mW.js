import{u as S,j as e,o as f,aS as Q,l as T,M as z,a2 as q,aI as P,aQ as D,X as U,B as u,aT as _,aU as w,r as g,aq as L,ar as N}from"./index-TTKrRBsV.js";import{G as $,C as G}from"./GlobalSearchInput-D1DeoeWx.js";import{C as O}from"./CreateButton-xdDnGHH7.js";import{C as V}from"./CustomDataTable-D2IlOEuA.js";import{P as A,B as H}from"./PageTitle-OKMYAOp7.js";import{U as K}from"./UploadButton-Bl29dtMb.js";import{a as X,b as Y,c as J,d as W}from"./clients.requests-DE0ZkmW1.js";import{u as Z}from"./useQuery-DXHJDm7O.js";import{C as ee}from"./CustomModalConfirm-DuPb8srr.js";import{u as te}from"./useClientTypes-BFb73J4y.js";import{T as j}from"./index-Ce0i5KU3.js";import{R as re}from"./EyeFilled-oI1XtQGU.js";import{R as ae}from"./EditFilled-96y0AoAx.js";import{R as se}from"./DeleteFilled-Lrowix85.js";import{P as ne}from"./PageResult-BMOmKs_e.js";import{R as k,C as l}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./index.esm-Dv3jW_V-.js";import"./UploadOutlined-BKXEKiN1.js";import"./fade-m1HoRkfl.js";import"./progress-0PFtpCVW.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./PageLoader-DmyE2ANN.js";import"./index-Chkbatr3.js";import"./index-CB8Qoy1w.js";import"./index-DVNdkQR1.js";const ie="/assets/Client_example-DE9qVYwP.xlsx",oe=()=>{const{t:s}=S();return[{title:e.jsxs(f,{align:"center",gap:"small",children:[e.jsx(Q,{size:20}),e.jsx("span",{children:s("Mijozlar")})]})},{title:s("Mijozlar")}]},le=(s,m,n,c)=>{const{t:r}=S(),i=T(),C=te(),p=z({mutationFn:X,onSuccess:()=>{q(r("Muvaffaqiyatli bajarildi !")),c()},onError:t=>{console.log(t)}}),a=t=>{p.mutate(t)},x=z({mutationFn:Y,onSuccess:()=>{c()},onError:t=>{console.log(t)}}),y=async t=>{x.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id",render:(t,d,h)=>e.jsx(e.Fragment,{children:(s.current-1)*s.pageSize+h+1})},{title:r("Nomi"),dataIndex:"name",key:"name"},{title:r("Telefon raqami"),dataIndex:"phone",key:"phone",render:t=>e.jsx(e.Fragment,{children:t})},{title:r("Mijoz turi"),dataIndex:"client_type",filters:[...C],filteredValue:m.client_type||null,filterSearch:!0,render:t=>{switch(t){case"Doimiy":return e.jsx(j,{color:"green",children:t});case"Tezkor":return e.jsx(j,{color:"red",children:t})}}},{title:r("Holati"),dataIndex:"status",key:"status",filters:[{text:r("To'langan"),value:"To'langan"},{text:"Qarzdorlik",value:"Qarzdorlik"}],filteredValue:m.status||null,render:t=>{switch(t){case"To'langan":return e.jsx(j,{color:"green",children:r("To'langan")});case"Qarzdorlik":return e.jsx(j,{color:"red",children:r("Qarzdorlik")})}}},{title:r("Qo'shilgan vaqti"),dataIndex:"added",key:"added",render:t=>e.jsx(e.Fragment,{children:P(t)})},{title:r("Izoh"),dataIndex:"desc",key:"desc",hidden:!0,render:t=>e.jsx(e.Fragment,{children:t})},{title:e.jsx(D,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:(t,d)=>e.jsxs(f,{align:"center",justify:"space-between",gap:"middle",children:[U.get(d,"is_special",!1)===!0?e.jsx(e.Fragment,{children:e.jsx(u,{type:"primary",icon:e.jsx(_,{}),onClick:()=>y({client:d.id,is_special:!1})})}):e.jsx(e.Fragment,{children:e.jsx(u,{type:"primary",icon:e.jsx(w,{}),onClick:()=>y({client:d.id,is_special:!0})})}),e.jsx(u,{type:"primary",icon:e.jsx(re,{}),onClick:()=>i(`/clients/clients/${t}`)}),e.jsx(u,{onClick:()=>i(`/clients/clients/update/${t}`),icon:e.jsx(ae,{})}),e.jsx(ee,{trigger:e.jsx(u,{danger:!0,icon:e.jsx(se,{})}),onOk:()=>a(t)})]})}]},Ne=()=>{const{t:s}=S(),m=T(),[n,c]=g.useState({current:1,pageSize:10,total:null}),[r,i]=g.useState({}),[C,p]=g.useState(""),{data:a,isLoading:x,isError:y,error:t,isFetching:d,refetch:h,isRefetching:F,...ce}=Z({queryKey:["clients",{page:n.current,pageSize:n.pageSize,filters:r}],queryFn:()=>J(n.current,n.pageSize,L(r)),select:o=>o.data,keepPreviousData:!0});g.useEffect(()=>{a&&c({current:a.current||1,pageSize:a.pageSize||10,total:a.total||""})},[a]);const I=(o,v)=>{c({...o}),i(v)},M=()=>{i({}),p("")},R=o=>{i({...r,search:o})},B=o=>{p(o.target.value)},E=le(n,r,i,h),b=oe();return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:s("Mijozlar")})}),e.jsxs(k,{gutter:[20,20],children:[e.jsx(l,{span:24,children:e.jsx(f,{align:"center",justify:"space-between",children:e.jsx(A,{children:s("Mijozlar")})})}),e.jsx(l,{span:24,children:e.jsx(H,{items:b})}),e.jsx(l,{span:24,children:e.jsx(ne,{isLoading:x,error:t,children:e.jsxs(k,{gutter:[20,20],children:[e.jsx(l,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx($,{value:C,placeholder:s("Qidiruv"),enterButton:!0,onSearch:R,onChange:B})}),e.jsx(l,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(f,{align:"center",justify:"end",gap:"middle",children:[e.jsx(K,{uploadRequest:W,refetch:h,ExampleFileUrl:ie}),e.jsx(G,{onClick:M}),e.jsx(O,{onClick:()=>m("create")})]})}),e.jsx(l,{span:24,children:e.jsx(V,{columns:E,data:(a==null?void 0:a.results)||[],pagination:n,loading:x||F,onChange:I})})]})})})]})]})};export{Ne as default};
