import{u as p,at as b,j as e,o as j,e7 as E,l as I,M as T,a2 as M,P as l,i as c,aI as P,aQ as q,B as h,r as x,aq as D,ar as O}from"./index-TTKrRBsV.js";import{G as L,C as Q}from"./GlobalSearchInput-D1DeoeWx.js";import{C as W}from"./CreateButton-xdDnGHH7.js";import{C as X}from"./CustomDataTable-D2IlOEuA.js";import{P as $,B as G}from"./PageTitle-OKMYAOp7.js";import{h as N,a as U}from"./workers.requests-CZHtwOOT.js";import{u as A}from"./useQuery-DXHJDm7O.js";import{C as H}from"./CustomModalConfirm-DuPb8srr.js";import{R as K}from"./EyeFilled-oI1XtQGU.js";import{R as Y}from"./EditFilled-96y0AoAx.js";import{R as J}from"./DeleteFilled-Lrowix85.js";import{R as C,C as o}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./fade-m1HoRkfl.js";const V=()=>{const{t:s}=p();return b(),[{title:e.jsxs(j,{align:"center",gap:"small",children:[e.jsx(E,{size:20}),e.jsx("span",{children:s("Sozlamalar")})]})},{title:e.jsx(e.Fragment,{children:s("Xodimlar")})}]},Z=(s,f,a,d)=>{const{t:r}=p(),n=I(),g=T({mutationFn:N,onSuccess:()=>{M(r("Muvaffaqiyatli bajarildi !")),d()},onError:t=>{console.log(t)}}),u=t=>{g.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id",render:(t,m,y)=>e.jsx(e.Fragment,{children:(s.current-1)*s.pageSize+y+1})},{title:r("Ism"),dataIndex:"first_name",key:"first_name"},{title:r("Familiya"),dataIndex:"last_name",key:"last_name"},{title:r("Telefon raqami"),dataIndex:"username",key:"username",render:t=>e.jsx(e.Fragment,{children:t})},{title:r("Email"),dataIndex:"email",key:"email"},{title:r("Rol"),dataIndex:"role",key:"role"},{title:r("Holati"),dataIndex:"is_active",render:t=>{switch(t){case!0:return e.jsx(c,{style:{color:"green"}});case!1:return e.jsx(l,{style:{color:"red"}})}}},{title:r("Savdo"),dataIndex:"is_trade",render:t=>{switch(t){case!0:return e.jsx(c,{style:{color:"green"}});case!1:return e.jsx(l,{style:{color:"red"}})}}},{title:r("Mijoz"),dataIndex:"is_client",render:t=>{switch(t){case!0:return e.jsx(c,{style:{color:"green"}});case!1:return e.jsx(l,{style:{color:"red"}})}}},{title:r("Statistika"),dataIndex:"is_statistics",render:t=>{switch(t){case!0:return e.jsx(c,{style:{color:"green"}});case!1:return e.jsx(l,{style:{color:"red"}})}}},{title:r("Ombor"),dataIndex:"is_storage",render:t=>{switch(t){case!0:return e.jsx(c,{style:{color:"green"}});case!1:return e.jsx(l,{style:{color:"red"}})}}},{title:r("Yaratilgan vaqti"),dataIndex:"date_joined",key:"date_joined",render:t=>e.jsx(e.Fragment,{children:P(t)})},{title:e.jsx(q,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:(t,m)=>e.jsxs(j,{align:"center",justify:"space-between",gap:"middle",children:[e.jsx(h,{type:"primary",icon:e.jsx(K,{}),onClick:()=>n(`/settings/workers/${t}`)}),e.jsx(h,{onClick:()=>n(`/settings/workers/update/${t}`),icon:e.jsx(Y,{})}),m.role!=="DIRECTOR"&&e.jsx(H,{trigger:e.jsx(h,{danger:!0,icon:e.jsx(J,{})}),onOk:()=>u(t)})]})}]},ke=()=>{const{t:s}=p(),f=I(),[a,d]=x.useState({current:1,pageSize:10,total:null}),[r,n]=x.useState({}),[g,u]=x.useState(""),{data:t,isLoading:m,isError:y,error:ee,isFetching:te,refetch:S,isRefetching:k,...re}=A({queryKey:["workers",{page:a.current,pageSize:a.pageSize,filters:r}],queryFn:()=>U(a.current,a.pageSize,D(r)),select:i=>i.data,keepPreviousData:!0});x.useEffect(()=>{t&&d({current:t.current||1,pageSize:t.pageSize||10,total:t.total||""})},[t]);const F=(i,B)=>{d({...i}),n(B)},R=()=>{n({}),u("")},_=i=>{n({...r,search:i})},v=i=>{u(i.target.value)},w=Z(a,r,n,S),z=V();return e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx("title",{children:s("Xodimlar")})}),e.jsxs(C,{gutter:[20,20],children:[e.jsx(o,{span:24,children:e.jsx(j,{align:"center",justify:"space-between",children:e.jsx($,{children:s("Xodimlar")})})}),e.jsx(o,{span:24,children:e.jsx(G,{items:z})}),e.jsx(o,{span:24,children:e.jsxs(C,{gutter:[20,20],children:[e.jsx(o,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(L,{value:g,placeholder:s("Qidiruv"),enterButton:!0,onSearch:_,onChange:v})}),e.jsx(o,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(j,{align:"center",justify:"end",gap:"middle",children:[e.jsx(Q,{onClick:R}),e.jsx(W,{onClick:()=>f("create")})]})}),e.jsx(o,{span:24,children:e.jsx(X,{columns:w,data:(t==null?void 0:t.results)||[],pagination:a,loading:m||k,onChange:F})})]})})]})]})};export{ke as default};
