import{u as p,j as e,o as u,aX as b,l as S,M as I,a2 as k,aQ as v,B as f,r as m,aq as T,ar as D}from"./index-TTKrRBsV.js";import{G as w,C as U}from"./GlobalSearchInput-D1DeoeWx.js";import{C as q}from"./CreateButton-xdDnGHH7.js";import{C as L}from"./CustomDataTable-D2IlOEuA.js";import{P as N,B as Q}from"./PageTitle-OKMYAOp7.js";import{U as G}from"./UploadButton-Bl29dtMb.js";import{a as O,b as X,c as _}from"./product-formats.requests-TWbBd2Xh.js";import{u as A}from"./useQuery-DXHJDm7O.js";import{C as $}from"./CustomModalConfirm-DuPb8srr.js";import{R as H}from"./EditFilled-96y0AoAx.js";import{R as K}from"./DeleteFilled-Lrowix85.js";import{R as C,C as i}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./index.esm-Dv3jW_V-.js";import"./UploadOutlined-BKXEKiN1.js";import"./fade-m1HoRkfl.js";import"./progress-0PFtpCVW.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";const Y="/assets/Format_example-DEEYXX2l.xlsx",J=()=>{const{t:r}=p();return[{title:e.jsxs(u,{align:"center",gap:"small",children:[e.jsx(b,{size:20}),e.jsx("span",{children:r("Mahsulot")})]})},{title:r("Mahsulot formatlari")}]},V=(r,x,s,l)=>{const{t:o}=p(),n=S(),d=I({mutationFn:O,onSuccess:()=>{k(),l()},onError:t=>{console.log(t)}}),c=t=>{d.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id",width:"50px",render:(t,h,g)=>e.jsx(e.Fragment,{children:(r.current-1)*r.pageSize+g+1})},{title:o("Nomi"),dataIndex:"name",key:"name"},{title:e.jsx(v,{size:15}),dataIndex:"id",key:"operation",align:"center",width:90,render:t=>e.jsxs(u,{align:"center",justify:"space-between",gap:"small",children:[e.jsx(f,{onClick:()=>n(`update/${t}`),icon:e.jsx(H,{})}),e.jsx($,{trigger:e.jsx(f,{danger:!0,icon:e.jsx(K,{})}),onOk:()=>c(t)})]})}]},ye=()=>{const{t:r}=p(),x=S(),[s,l]=m.useState({current:1,pageSize:10,total:null}),[o,n]=m.useState({}),[d,c]=m.useState(""),{data:t,isLoading:h,isError:g,error:W,isFetching:Z,refetch:j,isRefetching:F,...ee}=A({queryKey:["product-formats",{page:s.current,pageSize:s.pageSize,filters:o}],queryFn:()=>X(s.current,s.pageSize,T(o)),select:a=>a.data,keepPreviousData:!0});m.useEffect(()=>{t&&l({current:t.current||1,pageSize:t.pageSize||10,total:t.total||""})},[t]);const M=(a,P)=>{l({...a}),n(P)},B=()=>{n({}),c("")},y=a=>{n({...o,search:a})},E=a=>{c(a.target.value)},R=V(s,o,n,j),z=J();return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:r("Mahsulot formatlari")})}),e.jsxs(C,{gutter:[20,20],children:[e.jsx(i,{span:24,children:e.jsx(u,{align:"center",justify:"space-between",children:e.jsx(N,{children:r("Mahsulot formatlari")})})}),e.jsx(i,{span:24,children:e.jsx(Q,{items:z})}),e.jsx(i,{span:24,children:e.jsxs(C,{gutter:[20,20],children:[e.jsx(i,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(w,{value:d,placeholder:r("Qidiruv"),enterButton:!0,onSearch:y,onChange:E})}),e.jsx(i,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(u,{align:"center",justify:"end",gap:"middle",children:[e.jsx(G,{uploadRequest:_,refetch:j,ExampleFileUrl:Y}),e.jsx(U,{onClick:B}),e.jsx(q,{onClick:()=>x("create")})]})}),e.jsx(i,{span:24,children:e.jsx(L,{columns:R,data:(t==null?void 0:t.results)||[],pagination:s,loading:h||F,onChange:M})})]})})]})]})};export{ye as default};
