import{u as m,j as t,o as p,d as K,aw as E,r as l,au as D,X as x,V as h,C as w,dV as T,Q as P,aC as z,aB as y,dW as I,ar as L}from"./index-TTKrRBsV.js";import{B as R}from"./BackButton-BLVW6gZr.js";import{C as N}from"./CustomTabs-DeR7qKEd.js";import{P as Q,B as V}from"./PageTitle-OKMYAOp7.js";import{C as U,a as k}from"./CustomPieChart-BOEEwQKO.js";import{C as f,v as H,w as W,c as O,x as X,y as J}from"./CustomColumnChart-IbFykfOL.js";import{C as $}from"./CustomDatePicker-dCRvPDUL.js";import{C as A}from"./CustomDataTable-D2IlOEuA.js";import{P as M,E as G}from"./PageLoader-DmyE2ANN.js";import{u as q}from"./useClients-CTLUVbG-.js";import{u as B}from"./useQuery-DXHJDm7O.js";import{R as v,C as d}from"./row-Bxwr5CQq.js";import{C as _}from"./index-Chkbatr3.js";import{T as F}from"./index-CB8Qoy1w.js";import"./LeftOutlined-30Vtg-fw.js";import"./Skeleton-Bgqqq5sk.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./index-CRizbU4B.js";import"./index-DVNdkQR1.js";import"./clients.requests-DE0ZkmW1.js";import"./PlusOutlined-Ba-GwlE8.js";const Z=()=>{const{t:a}=m();return[{title:t.jsxs(p,{align:"center",gap:"small",children:[t.jsx(K,{size:20}),t.jsx("span",{children:a("Statistika")})]})},{title:a("Mijozlar statistikasi")}]},tt=()=>{const{t:a}=m(),{company:{currency_type:n}}=E(),{clientsOptions:i,clientsData:o}=q(),[r,s]=l.useState(D().format("YYYY-MM-DD")),[e,u]=l.useState(""),[C,b]=l.useState({name:""});l.useEffect(()=>{u(x.get(i[0],"value",""))},[i]),l.useEffect(()=>{const c=o.find(g=>g.id===e);c&&b(c)},[e,o]);const{data:j,isLoading:Y,error:S}=B({queryKey:["client-monthly",{date:r,clientID:e}],queryFn:()=>H({date:r,clientID:e}),select:c=>c.data,enabled:!!e});return t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{xs:24,children:t.jsxs(p,{align:"center",justify:"space-between",children:[t.jsx(h.Title,{level:5,children:a("Kunlik statistika")}),t.jsxs(p,{gap:"middle",align:"center",children:[t.jsx(w,{style:{width:"150px"},options:i,value:e,onChange:c=>u(c)}),t.jsx($,{style:{width:"150px"},picker:"day",value:D(r),format:"YYYY-MM-DD",onChange:(c,g)=>{s(g)}})]})]})}),t.jsx(d,{xs:24,children:Y?t.jsx(M,{}):t.jsx(t.Fragment,{children:S?t.jsx(G,{error:S}):t.jsx(t.Fragment,{children:t.jsx(p,{gap:"20px",vertical:!0,children:t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Sana")}),value:r,formatter:c=>`${c}`,prefix:t.jsx(T,{})})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Mijoz")}),value:x.get(C,"name",""),formatter:c=>`${c}`,prefix:t.jsx(T,{})})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Savdolar soni")}),value:x.get(j,"total_count",0),precision:2,prefix:t.jsx(P,{}),suffix:a("ta")})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Savdolar summasi")}),value:x.get(j,"total_summa",0),precision:2,prefix:t.jsx(z,{}),suffix:n})}),t.jsx(d,{xs:24,md:24,children:t.jsx(et,{data:j})}),t.jsx(d,{xs:24,md:24,children:t.jsx(st,{data:j})}),t.jsx(d,{xs:24,md:24,children:t.jsx(at,{data:j})})]})})})})})]})},et=({data:a})=>{const{t:n}=m(),[i,o]=l.useState([]);l.useEffect(()=>{const s=x.get(a,"hourly_stats",[]).map((e,u)=>({type:e.hour,value:e.total_count}));o(s)},[a]);const r={data:i};return t.jsx(_,{title:n("Savdolar soni (soatlar bo'yicha)"),children:t.jsx(U,{config:r})})},st=({data:a})=>{const{t:n}=m(),[i,o]=l.useState([]);l.useEffect(()=>{const s=x.get(a,"hourly_stats",[]).map((e,u)=>({type:e.hour,value:e.total_summa}));o(s)},[a]);const r={data:i};return t.jsx(_,{title:n("Savdolar summasi (soatlar bo'yicha)"),children:t.jsx(k,{config:r})})},at=({data:a})=>{const{t:n}=m(),i=[{title:n("Vaqt"),dataIndex:"hour"},{title:n("Savdolar soni"),dataIndex:"total_count",render:s=>t.jsx(t.Fragment,{children:y(s,n("ta"))}),sorter:(s,e)=>s.total_count-e.total_count},{title:n("Savdolar summasi"),dataIndex:"total_summa",render:s=>t.jsx(t.Fragment,{children:y(s)}),sorter:(s,e)=>s.total_summa-e.total_summa}],[o,r]=l.useState([]);return l.useEffect(()=>{const s=x.get(a,"hourly_stats",[]).map((e,u)=>({...e}));r(s)},[a]),t.jsx(A,{title:n("Mijoz (soatlar bo'yicha)"),dataSource:o,columns:i,pagination:!1})},nt=()=>{const{t:a}=m(),{company:{currency_type:n}}=E(),{clientsOptions:i,clientsData:o}=q(),[r,s]=l.useState(D().format("YYYY-MM")),[e,u]=l.useState(""),[C,b]=l.useState({name:""});l.useEffect(()=>{u(x.get(i[0],"value",""))},[i]),l.useEffect(()=>{const c=o.find(g=>g.id===e);c&&b(c)},[e,o]);const{data:j,isLoading:Y,error:S}=B({queryKey:["client-monthly",{date:r,clientID:e}],queryFn:()=>W({date:r,clientID:e}),select:c=>c.data,enabled:!!e});return t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{xs:24,children:t.jsxs(p,{align:"center",justify:"space-between",children:[t.jsx(h.Title,{level:5,children:a("Oylik statistika")}),t.jsxs(p,{gap:"middle",align:"center",children:[t.jsx(w,{style:{width:"150px"},options:i,value:e,onChange:c=>u(c)}),t.jsx($,{style:{width:"150px"},picker:"month",value:D(r),format:"YYYY-MM",onChange:(c,g)=>{s(g)}})]})]})}),t.jsx(d,{xs:24,children:Y?t.jsx(M,{}):t.jsx(t.Fragment,{children:S?t.jsx(G,{error:S}):t.jsx(t.Fragment,{children:t.jsx(p,{gap:"20px",vertical:!0,children:t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Oy")}),value:I(r),formatter:c=>`${c}`,prefix:t.jsx(T,{})})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Mijoz")}),value:x.get(C,"name",""),formatter:c=>`${c}`,prefix:t.jsx(T,{})})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Savdolari soni")}),value:x.get(j,"total_count",0),precision:2,prefix:t.jsx(P,{}),suffix:a("ta")})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Savdolar summasi")}),value:x.get(j,"total_summa",0),precision:2,prefix:t.jsx(z,{}),suffix:n})}),t.jsx(d,{xs:24,md:24,children:t.jsx(rt,{data:j})}),t.jsx(d,{xs:24,md:24,children:t.jsx(lt,{data:j})}),t.jsx(d,{xs:24,md:24,children:t.jsx(it,{data:j})})]})})})})})]})},rt=({data:a})=>{const{t:n}=m(),[i,o]=l.useState([]);l.useEffect(()=>{const s=x.get(a,"daily_stats",[]).map((e,u)=>({type:e.date,value:e.total_count}));o(s)},[a]);const r={data:i};return t.jsx(_,{title:n("Savdolar soni (kunlar bo'yicha)"),children:t.jsx(k,{config:r})})},lt=({data:a})=>{const{t:n}=m(),[i,o]=l.useState([]);l.useEffect(()=>{const s=x.get(a,"daily_stats",[]).map((e,u)=>({type:e.date,value:e.total_summa}));o(s)},[a]);const r={data:i};return t.jsx(_,{title:n("Savdolar summasi (kunlar bo'yicha)"),children:t.jsx(k,{config:r})})},it=({data:a})=>{const{t:n}=m(),i=[{title:n("Sana"),dataIndex:"date"},{title:n("Savdolar soni"),dataIndex:"total_count",render:s=>t.jsx(t.Fragment,{children:y(s,n("ta"))}),sorter:(s,e)=>s.total_count-e.total_count},{title:n("Savdolar summasi"),dataIndex:"total_summa",render:s=>t.jsx(t.Fragment,{children:y(s)}),sorter:(s,e)=>s.total_summa-e.total_summa}],[o,r]=l.useState([]);return l.useEffect(()=>{const s=x.get(a,"daily_stats",[]).map((e,u)=>({...e}));r(s)},[a]),t.jsx(A,{title:n("Mijoz (kunlar bo'yicha)"),dataSource:o,columns:i,pagination:!1})},ot=()=>{const{t:a}=m();E();const{data:n,isLoading:i,error:o}=B({queryKey:["client-total"],queryFn:X,select:r=>r.data});return t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{xs:24,children:t.jsx(p,{align:"center",justify:"space-between",children:t.jsx(h.Title,{level:5,children:a("Umumiy statistika")})})}),t.jsx(d,{xs:24,children:i?t.jsx(M,{}):t.jsx(t.Fragment,{children:o?t.jsx(G,{error:o}):t.jsx(t.Fragment,{children:t.jsx(p,{gap:"20px",vertical:!0,children:t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{xs:24,md:24,children:t.jsx(dt,{data:n})}),t.jsx(d,{xs:24,md:24,children:t.jsx(ct,{data:n})}),t.jsx(d,{xs:24,md:24,children:t.jsx(xt,{data:n})})]})})})})})]})},ct=({data:a})=>{const{t:n}=m(),i=[{title:n("Nomi"),dataIndex:"client_name"},{title:n("Savdolar soni"),dataIndex:"total_count",render:(s,e)=>t.jsx(t.Fragment,{children:y(s,n("ta"))}),sorter:(s,e)=>s.total_count-e.total_count},{title:n("Savdolar summasi"),dataIndex:"total_summa",render:s=>t.jsx(t.Fragment,{children:y(s)}),sorter:(s,e)=>s.total_summa-e.total_summa}],[o,r]=l.useState([]);return l.useEffect(()=>{const s=x.get(a,"top_10_clients",[]).map((e,u)=>({...e}));r(s)},[a]),t.jsx(A,{title:n("Top 10 mijozlar"),dataSource:o,columns:i,pagination:!1})},dt=({data:a})=>{const{t:n}=m(),[i,o]=l.useState([]);l.useEffect(()=>{const s=x.get(a,"top_10_clients",[]).map((e,u)=>({type:e.client_name,value:e.total_summa}));o(s)},[a]);const r={data:i};return t.jsx(_,{title:n("Top 10 mijozlar (savdo summasi bo'yicha)"),children:t.jsx(O,{config:r})})},xt=({data:a})=>{const{t:n}=m(),i=[{title:n("Nomi"),dataIndex:"client_name"},{title:n("Savdolar soni"),dataIndex:"total_count",render:(s,e)=>t.jsx(t.Fragment,{children:y(s,n("ta"))}),sorter:(s,e)=>s.total_count-e.total_count},{title:n("Savdolar summasi"),dataIndex:"total_summa",render:s=>t.jsx(t.Fragment,{children:y(s)}),sorter:(s,e)=>s.total_summa-e.total_summa}],[o,r]=l.useState([]);return l.useEffect(()=>{const s=x.get(a,"client_stats",[]).map((e,u)=>({...e}));r(s)},[a]),t.jsx(A,{title:n("Barcha mijozlar"),dataSource:o,columns:i,pagination:!0})},ut=()=>{const{t:a}=m(),{company:{currency_type:n}}=E(),{clientsOptions:i,clientsData:o}=q(),[r,s]=l.useState(D().format("YYYY")),[e,u]=l.useState(""),[C,b]=l.useState({name:""});l.useEffect(()=>{u(x.get(i[0],"value",""))},[i]),l.useEffect(()=>{const c=o.find(g=>g.id===e);c&&b(c)},[e,o]);const{data:j,isLoading:Y,error:S}=B({queryKey:["product-yearly",{date:r,clientID:e}],queryFn:()=>J({date:r,clientID:e}),select:c=>c.data,enabled:!!e});return t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{xs:24,children:t.jsxs(p,{align:"center",justify:"space-between",children:[t.jsx(h.Title,{level:5,children:a("Yillik statistika")}),t.jsxs(p,{gap:"middle",align:"center",children:[t.jsx(w,{style:{width:"150px"},options:i,value:e,onChange:c=>u(c)}),t.jsx($,{style:{width:"150px"},picker:"year",value:D(r),format:"YYYY",onChange:(c,g)=>{s(g)}})]})]})}),t.jsx(d,{xs:24,children:Y?t.jsx(M,{}):t.jsx(t.Fragment,{children:S?t.jsx(G,{error:S}):t.jsx(t.Fragment,{children:t.jsx(p,{gap:"20px",vertical:!0,children:t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Yil")}),value:r,formatter:c=>`${c}`,prefix:t.jsx(T,{})})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Mijoz")}),value:x.get(C,"name",""),formatter:c=>`${c}`,prefix:t.jsx(T,{})})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Savdolar soni")}),value:x.get(j,"total_count",0),precision:2,prefix:t.jsx(P,{}),suffix:a("ta")})}),t.jsx(d,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(h.Title,{level:4,children:a("Savdolar summasi")}),value:x.get(j,"total_summa",0),precision:2,prefix:t.jsx(z,{}),suffix:n})}),t.jsx(d,{xs:24,md:24,children:t.jsx(mt,{data:j})}),t.jsx(d,{xs:24,md:24,children:t.jsx(jt,{data:j})}),t.jsx(d,{xs:24,md:24,children:t.jsx(ht,{data:j})})]})})})})})]})},mt=({data:a})=>{const{t:n}=m(),[i,o]=l.useState([]);l.useEffect(()=>{const s=x.get(a,"monthly_stats",[]).map((e,u)=>({type:I(e.month),value:e.total_count}));o(s)},[a]);const r={data:i};return t.jsx(_,{title:n("Savdolar soni (oylar bo'yicha)"),children:t.jsx(O,{config:r})})},jt=({data:a})=>{const{t:n}=m(),[i,o]=l.useState([]);l.useEffect(()=>{const s=x.get(a,"monthly_stats",[]).map((e,u)=>({type:I(e.month),value:e.total_summa}));o(s)},[a]);const r={data:i};return t.jsx(_,{title:n("Savdolar summasi (oylar bo'yicha)"),children:t.jsx(k,{config:r})})},ht=({data:a})=>{const{t:n}=m(),i=[{title:n("Oy"),dataIndex:"month",render:s=>t.jsx(t.Fragment,{children:I(s)})},{title:n("Savdolar soni"),dataIndex:"total_count",render:s=>t.jsx(t.Fragment,{children:y(s,n("ta"))}),sorter:(s,e)=>s.total_count-e.total_count},{title:n("Savdolar summasi"),dataIndex:"total_summa",render:s=>t.jsx(t.Fragment,{children:y(s)}),sorter:(s,e)=>s.total_summa-e.total_summa}],[o,r]=l.useState([]);return l.useEffect(()=>{const s=x.get(a,"monthly_stats",[]).map((e,u)=>({...e}));r(s)},[a]),t.jsx(A,{title:n("Mijoz (oylar bo'yicha)"),dataSource:o,columns:i,pagination:!1})},zt=()=>{const{t:a}=m(),n=Z();return t.jsxs(t.Fragment,{children:[t.jsx(L,{children:t.jsx("title",{children:a("Mijozlar statistikasi")})}),t.jsxs(v,{gutter:[20,20],children:[t.jsx(d,{span:24,children:t.jsxs(p,{align:"center",justify:"space-between",children:[t.jsx(Q,{children:a("Mijozlar statistikasi")}),t.jsx(p,{gap:"middle",children:t.jsx(R,{})})]})}),t.jsx(d,{span:24,children:t.jsx(V,{items:n})}),t.jsx(d,{span:24,children:t.jsxs(N,{tabPosition:"top",children:[t.jsx(F.TabPane,{tab:a("Umumiy"),children:t.jsx(ot,{})},"1"),t.jsx(F.TabPane,{tab:a("Kunlik"),children:t.jsx(tt,{})},"2"),t.jsx(F.TabPane,{tab:a("Oylik"),children:t.jsx(nt,{})},"4"),t.jsx(F.TabPane,{tab:a("Yillik"),children:t.jsx(ut,{})},"3")]})})]})]})};export{zt as default};
