import{u as f,l as y,M as k,a2 as v,r as I,j as t,U as _,X as d,aB as i,aI as R,aQ as T,o as z,B as o,aa as F}from"./index-TTKrRBsV.js";import{C}from"./CustomModalConfirm-DuPb8srr.js";import{u as b}from"./useClients-CTLUVbG-.js";import{f as M}from"./trade.requests-D_bujT-q.js";import{R as N}from"./index-Jp31-sNK.js";import{C as Q}from"./CheckUI-V7eYEVCD.js";import{T as p}from"./index-Ce0i5KU3.js";import{R as $}from"./EyeFilled-oI1XtQGU.js";import{R as S}from"./PrinterOutlined-DYf3p5xo.js";import{R as E}from"./EditFilled-96y0AoAx.js";import{R as q}from"./DeleteFilled-Lrowix85.js";const K=(w,l,B,x)=>{const{t:r}=f(),u=y(),{clientsOptions:h}=b(),g=k({mutationFn:M,onSuccess:()=>{v(r("Muvaffaqiyatli bajarildi !")),x()},onError:e=>{console.log(e)}}),j=e=>{g.mutate(e)},c=I.useRef({}),m=e=>(c.current[e]||(c.current[e]=F.createRef()),c.current[e]);return[{title:"â„–",dataIndex:"id",key:"id"},{title:r("Mijoz"),dataIndex:"client",key:"client",render:e=>t.jsx(t.Fragment,{children:t.jsx(_,{to:`/clients/clients/${d.get(e,"id","")}`,children:d.get(e,"name","")})}),filters:[...h],filteredValue:l.client||null,filterSearch:!0,hidden:!1},{title:"Mahsulotlar",key:"products",hidden:!0,children:[{title:r("#"),dataIndex:"products",key:"products",render:(e,a)=>a.products.map((s,n)=>t.jsx("div",{children:n+1},n))},{title:r("Nomi"),dataIndex:"products",key:"products",render:(e,a)=>a.products.map((s,n)=>t.jsx("div",{children:d.get(s.product,"name","")},n))},{title:r("Narxi"),dataIndex:"products",key:"products",render:(e,a)=>a.products.map((s,n)=>t.jsx("div",{children:i(s.price)},n))},{title:r("O'lchov turi"),dataIndex:"products",key:"products",render:(e,a)=>a.products.map((s,n)=>t.jsx("div",{children:s.size_type},n))},{title:r("Miqdori"),dataIndex:"products",key:"products",render:(e,a)=>a.products.map((s,n)=>t.jsx("div",{children:i(s.count,s.product.format)},n))}]},{title:"Xizmatlar",key:"services",hidden:!0,children:[{title:r("#"),dataIndex:"services",key:"services",render:(e,a)=>a.services.map((s,n)=>t.jsx("div",{children:n+1},n))},{title:r("Nomi"),dataIndex:"services",key:"services",render:(e,a)=>a.services.map((s,n)=>t.jsx("div",{children:d.get(s.service,"name","")},n))},{title:r("Narxi"),dataIndex:"services",key:"services",render:(e,a)=>a.services.map((s,n)=>t.jsx("div",{children:i(s.price)},n))},{title:r("Miqdori"),dataIndex:"services",key:"services",render:(e,a)=>a.services.map((s,n)=>t.jsx("div",{children:i(s.count,r("ta"))},n))}]},{title:r("Jami summa (mahsulotlar)"),dataIndex:"total_product_summa",key:"total_product_summa",render:e=>t.jsx(t.Fragment,{children:i(e)}),hidden:!0},{title:r("Jami summa (xizmatlar)"),dataIndex:"total_service_summa",key:"total_service_summa",render:e=>t.jsx(t.Fragment,{children:i(e)}),hidden:!0},{title:r("Chegirma"),dataIndex:"discount_summa",key:"discount_summa",render:e=>t.jsx(t.Fragment,{children:i(e)})},{title:r("Jami summa"),dataIndex:"total_summa",key:"total_summa",render:e=>t.jsx(t.Fragment,{children:i(e)})},{title:r("To'langan"),dataIndex:"total_pay",key:"total_pay",render:e=>t.jsx(t.Fragment,{children:i(e)})},{title:r("Qarzdorlik"),dataIndex:"debt_balance",key:"debt_balance",render:e=>t.jsx(t.Fragment,{children:i(e)})},{title:r("Holati"),dataIndex:"status",key:"status",filters:[{text:r("Qarzdorlik"),value:"Qarzdorlik"},{text:r("To'langan"),value:"To'langan"}],filteredValue:l.status||null,render:e=>{switch(e){case"Qarzdorlik":return t.jsx(p,{color:"red",children:r("Qarzdorlik")});case"To'langan":return t.jsx(p,{color:"green",children:r("To'langan")})}}},{title:r("Sana"),dataIndex:"date",key:"date",render:e=>t.jsx(t.Fragment,{children:R(e)})},{title:r("Izoh"),dataIndex:"desc",key:"desc",width:300,hidden:!0},{title:t.jsx(T,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:(e,a)=>t.jsxs(z,{align:"center",justify:"space-between",gap:"middle",children:[t.jsx(o,{type:"primary",onClick:()=>u(`/trades/trades/${e}`),icon:t.jsx($,{})}),t.jsx(Q,{data:a,componentRef:m(e)}),t.jsx(N,{pageStyle:"@page { size: 80mm 100%; margin: 20px; padding: 0px; } body {  margin: 20px; padding: 0px; }",bodyClass:"print",trigger:()=>t.jsx(o,{icon:t.jsx(S,{})}),content:()=>m(e).current}),!d.get(a,"is_payment",!0)&&t.jsx(o,{onClick:()=>u(`/trades/trades/update/${e}`),icon:t.jsx(E,{})}),t.jsx(C,{trigger:t.jsx(o,{danger:!0,icon:t.jsx(q,{})}),onOk:()=>j(e)})]})}]};export{K as u};
