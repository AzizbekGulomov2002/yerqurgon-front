import{X as t,aR as B,au as y,u as D,aw as N,r as R,j as e,O as c,C as v,aD as w,aE as K,aF as $,o as M,B as g}from"./index-TTKrRBsV.js";import{C as P}from"./CustomDatePicker-dCRvPDUL.js";import{C as u}from"./CustomInputNumber-BoiyYvjJ.js";import{C as W}from"./CustomTextarea-DTb8tAvY.js";import{u as X}from"./useFinanceTransactions-DmFhBg5U.js";import{c as Y,a as h,u as _,F as o,C as d,o as G}from"./index.esm-Dv3jW_V-.js";import{D as b}from"./index-CwYkfvr8.js";import{R as H,C as l}from"./row-Bxwr5CQq.js";function J(a){return{transaction:t.get(a,"transaction",""),cash:t.get(a,"cash",""),card:t.get(a,"card",""),other:t.get(a,"card",""),desc:t.get(a,"desc",""),date:B(t.get(a,"date",""))}}function ne(a){return{transaction:t.get(a,"transaction.id",""),cash:t.get(a,"cash",""),card:t.get(a,"card",""),other:t.get(a,"card",""),desc:t.get(a,"desc",""),date:y(a.date)}}const oe=({defaultValues:a,handleSubmit:q,actionLoading:x=!1,readOnly:Q=!1})=>{var f;const{t:s}=D(),{company:{currency_type:m}}=N(),F=Y().shape({transaction:h().required(s("Maydonni kiritishingiz shart !")),cash:h().nullable(),card:h().nullable(),other:h().nullable()}).test("one-of-three-required",s("Naqt, Karta orqali yoki Boshqa maydonlaridan biri kiritilishi shart!"),function(r){const{path:T,createError:E}=this,O=parseFloat(r.cash)||0,z=parseFloat(r.card)||0,A=parseFloat(r.other)||0;return O>0||z>0||A>0?!0:E({path:`${T}.cash`,message:s("Naqt, Karta orqali yoki Boshqa maydonlaridan biri kiritilishi shart!")})}),C=G(F),{transactionsOptions:I}=X(),{control:i,formState:{errors:n},reset:j,watch:U,...S}=_({defaultValues:{date:y(),cash:0,card:0,other:0,...a},resolver:C});R.useEffect(()=>{j(a)},[a]);const p=()=>j({}),k=S.handleSubmit(r=>{q(J(r),p)});return e.jsxs(o,{layout:"vertical",className:"create-form",name:"create-form",size:"large",onFinish:k,children:[e.jsx(b,{}),e.jsxs(H,{gutter:[20,20],children:[e.jsx(l,{xs:24,md:6,children:e.jsx(o.Item,{label:s("Tranzaktsiya"),...c(n,"transaction"),required:!0,children:e.jsx(d,{name:"transaction",control:i,render:({field:r})=>e.jsx(v,{options:I,...r})})})}),e.jsx(l,{xs:24,md:6,children:e.jsx(o.Item,{label:s("Naqt"),...c(n,"cash"),required:!0,help:(f=n.cash)==null?void 0:f.message,validateStatus:n.cash?"error":"",children:e.jsx(d,{name:"cash",control:i,render:({field:r})=>e.jsx(u,{addonAfter:m,prefix:e.jsx(w,{}),...r})})})}),e.jsx(l,{xs:24,md:6,children:e.jsx(o.Item,{label:s("Karta orqali"),...c(n,"card"),required:!0,children:e.jsx(d,{name:"card",control:i,render:({field:r})=>e.jsx(u,{addonAfter:m,prefix:e.jsx(K,{}),...r})})})}),e.jsx(l,{xs:24,md:6,children:e.jsx(o.Item,{label:s("Boshqa"),...c(n,"other"),required:!0,children:e.jsx(d,{name:"other",control:i,render:({field:r})=>e.jsx(u,{addonAfter:m,prefix:e.jsx($,{}),...r})})})}),e.jsx(l,{xs:24,md:6,children:e.jsx(o.Item,{label:s("Sana"),...c(n,"date"),required:!0,children:e.jsx(d,{name:"date",control:i,render:({field:r})=>e.jsx(P,{...r})})})}),e.jsx(l,{xs:24,md:6,children:e.jsx(o.Item,{label:s("Izoh"),...c(n,"desc"),children:e.jsx(d,{name:"desc",control:i,render:({field:r})=>e.jsx(W,{...r})})})})]}),e.jsx(b,{}),e.jsx(o.Item,{children:e.jsxs(M,{align:"center",justify:"end",gap:"middle",children:[e.jsx(g,{htmlType:"button",onClick:p,children:s("Tozalash")}),e.jsx(g,{type:"primary",htmlType:"submit",loading:x,disabled:x,children:s("Yuborish")})]})})]})};export{oe as O,ne as p};
