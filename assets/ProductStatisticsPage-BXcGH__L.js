import{u as h,j as t,o as g,d as L,aw as P,r as l,au as S,X as c,V as x,C as w,dV as b,Q as Y,aC as A,aB as p,dW as E,v as R,ar as N}from"./index-TTKrRBsV.js";import{B as Q}from"./BackButton-BLVW6gZr.js";import{C as V}from"./CustomTabs-DeR7qKEd.js";import{P as U,B as H}from"./PageTitle-OKMYAOp7.js";import{C as z,a as k}from"./CustomPieChart-BOEEwQKO.js";import{C as f,j as W,k as X,c as K,l as J,m as Z}from"./CustomColumnChart-IbFykfOL.js";import{C as $}from"./CustomDatePicker-dCRvPDUL.js";import{C as F}from"./CustomDataTable-D2IlOEuA.js";import{P as q,E as G}from"./PageLoader-DmyE2ANN.js";import{u as O}from"./useProducts-TVEJRWTV.js";import{u as B}from"./useQuery-DXHJDm7O.js";import{R as _,C as i}from"./row-Bxwr5CQq.js";import{C as v}from"./index-Chkbatr3.js";import{T as I}from"./index-CB8Qoy1w.js";import"./LeftOutlined-30Vtg-fw.js";import"./Skeleton-Bgqqq5sk.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./index-CRizbU4B.js";import"./index-DVNdkQR1.js";import"./products.requests-D64CJ7hA.js";import"./PlusOutlined-Ba-GwlE8.js";const tt=()=>{const{t:a}=h();return[{title:t.jsxs(g,{align:"center",gap:"small",children:[t.jsx(L,{size:20}),t.jsx("span",{children:a("Statistika")})]})},{title:a("Mahsulotlar statistikasi")}]},et=()=>{const{t:a}=h(),{company:{currency_type:r}}=P(),{productsOptions:n,productsData:u}=O(),[o,e]=l.useState(S().format("YYYY-MM-DD")),[s,m]=l.useState(""),[D,M]=l.useState({name:"",format:""});l.useEffect(()=>{m(c.get(n[0],"value",""))},[n]),l.useEffect(()=>{const d=u.find(y=>y.id===s);d&&M(d)},[s,u]);const{data:j,isLoading:C,error:T}=B({queryKey:["product-monthly",{date:o,productID:s}],queryFn:()=>W({date:o,productID:s}),select:d=>d.data,enabled:!!s});return t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{xs:24,children:t.jsxs(g,{align:"center",justify:"space-between",children:[t.jsx(x.Title,{level:5,children:a("Kunlik statistika")}),t.jsxs(g,{gap:"middle",align:"center",children:[t.jsx(w,{style:{width:"150px"},options:n,value:s,onChange:d=>m(d)}),t.jsx($,{style:{width:"150px"},picker:"day",value:S(o),format:"YYYY-MM-DD",onChange:(d,y)=>{e(y)}})]})]})}),t.jsx(i,{xs:24,children:C?t.jsx(q,{}):t.jsx(t.Fragment,{children:T?t.jsx(G,{error:T}):t.jsx(t.Fragment,{children:t.jsx(g,{gap:"20px",vertical:!0,children:t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Sana")}),value:o,formatter:d=>`${d}`,prefix:t.jsx(b,{})})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot")}),value:c.get(D,"name",""),formatter:d=>`${d}`,prefix:t.jsx(b,{})})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot miqdori")}),value:c.get(j,"total_count",0),precision:2,prefix:t.jsx(Y,{}),suffix:c.get(D,"format.name","")})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot summasi")}),value:c.get(j,"total_summa",0),precision:2,prefix:t.jsx(A,{}),suffix:r})}),t.jsx(i,{xs:24,md:24,children:t.jsx(st,{data:j})}),t.jsx(i,{xs:24,md:24,children:t.jsx(at,{data:j})}),t.jsx(i,{xs:24,md:24,children:t.jsx(rt,{data:j})})]})})})})})]})},st=({data:a})=>{const{t:r}=h(),[n,u]=l.useState([]);l.useEffect(()=>{const e=c.get(a,"hourly_stats",[]).map((s,m)=>({type:s.hour,value:s.total_count}));u(e)},[a]);const o={data:n};return t.jsx(v,{title:r("Mahsulot soni (soatlar bo'yicha)"),children:t.jsx(z,{config:o})})},at=({data:a})=>{const{t:r}=h(),[n,u]=l.useState([]);l.useEffect(()=>{const e=c.get(a,"hourly_stats",[]).map((s,m)=>({type:s.hour,value:s.total_summa}));u(e)},[a]);const o={data:n};return t.jsx(v,{title:r("Mahsulot summasi (soatlar bo'yicha)"),children:t.jsx(k,{config:o})})},rt=({data:a})=>{const{t:r}=h(),n=[{title:r("Vaqt"),dataIndex:"hour"},{title:r("Savdolar soni"),dataIndex:"total_count",render:e=>t.jsx(t.Fragment,{children:p(e,r("ta"))}),sorter:(e,s)=>e.total_count-s.total_count},{title:r("Mahsulot summasi"),dataIndex:"total_summa",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.total_summa-s.total_summa}],[u,o]=l.useState([]);return l.useEffect(()=>{const e=c.get(a,"hourly_stats",[]).map((s,m)=>({...s}));o(e)},[a]),t.jsx(F,{title:r("Mahsulot (soatlar bo'yicha)"),dataSource:u,columns:n,pagination:!1})},nt=()=>{const{t:a}=h(),{company:{currency_type:r}}=P(),{productsOptions:n,productsData:u}=O(),[o,e]=l.useState(S().format("YYYY-MM")),[s,m]=l.useState(""),[D,M]=l.useState({name:"",format:""});l.useEffect(()=>{m(c.get(n[0],"value",""))},[n]),l.useEffect(()=>{const d=u.find(y=>y.id===s);d&&M(d)},[s,u]);const{data:j,isLoading:C,error:T}=B({queryKey:["product-monthly",{date:o,productID:s}],queryFn:()=>X({date:o,productID:s}),select:d=>d.data,enabled:!!s});return t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{xs:24,children:t.jsxs(g,{align:"center",justify:"space-between",children:[t.jsx(x.Title,{level:5,children:a("Oylik statistika")}),t.jsxs(g,{gap:"middle",align:"center",children:[t.jsx(w,{style:{width:"150px"},options:n,value:s,onChange:d=>m(d)}),t.jsx($,{style:{width:"150px"},picker:"month",value:S(o),format:"YYYY-MM",onChange:(d,y)=>{e(y)}})]})]})}),t.jsx(i,{xs:24,children:C?t.jsx(q,{}):t.jsx(t.Fragment,{children:T?t.jsx(G,{error:T}):t.jsx(t.Fragment,{children:t.jsx(g,{gap:"20px",vertical:!0,children:t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Oy")}),value:E(o),formatter:d=>`${d}`,prefix:t.jsx(b,{})})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot")}),value:c.get(D,"name",""),formatter:d=>`${d}`,prefix:t.jsx(b,{})})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot miqdori")}),value:c.get(j,"total_count",0),precision:2,prefix:t.jsx(Y,{}),suffix:c.get(D,"format.name","")})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot summasi")}),value:c.get(j,"total_summa",0),precision:2,prefix:t.jsx(A,{}),suffix:r})}),t.jsx(i,{xs:24,md:24,children:t.jsx(ot,{data:j})}),t.jsx(i,{xs:24,md:24,children:t.jsx(lt,{data:j})}),t.jsx(i,{xs:24,md:24,children:t.jsx(it,{data:j})})]})})})})})]})},ot=({data:a})=>{const{t:r}=h(),[n,u]=l.useState([]);l.useEffect(()=>{const e=c.get(a,"daily_datas",[]).map((s,m)=>({type:s.date,value:s.total_count}));u(e)},[a]);const o={data:n};return t.jsx(v,{title:r("Mahsulot miqdori (kunlar bo'yicha)"),children:t.jsx(k,{config:o})})},lt=({data:a})=>{const{t:r}=h(),[n,u]=l.useState([]);l.useEffect(()=>{const e=c.get(a,"daily_datas",[]).map((s,m)=>({type:s.date,value:s.total_summa}));u(e)},[a]);const o={data:n};return t.jsx(v,{title:r("Mahsulot summasi (kunlar bo'yicha)"),children:t.jsx(k,{config:o})})},it=({data:a})=>{const{t:r}=h(),n=[{title:r("Sana"),dataIndex:"date"},{title:r("Mahsulot miqdori"),dataIndex:"total_count",render:e=>t.jsx(t.Fragment,{children:p(e,c.get(a,"format_name",""))}),sorter:(e,s)=>e.total_count-s.total_count},{title:r("Mahsulot summasi"),dataIndex:"total_summa",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.total_summa-s.total_summa}],[u,o]=l.useState([]);return l.useEffect(()=>{const e=c.get(a,"daily_datas",[]).map((s,m)=>({...s}));o(e)},[a]),t.jsx(F,{title:r("Mahsulot (kunlar bo'yicha)"),dataSource:u,columns:n,pagination:!1})},ct=()=>{const{t:a}=h(),{company:{currency_type:r}}=P(),{data:n,isLoading:u,error:o}=B({queryKey:["product-total"],queryFn:J,select:e=>e.data});return t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{xs:24,children:t.jsx(g,{align:"center",justify:"space-between",children:t.jsx(x.Title,{level:5,children:a("Umumiy statistika")})})}),t.jsx(i,{xs:24,children:u?t.jsx(q,{}):t.jsx(t.Fragment,{children:o?t.jsx(G,{error:o}):t.jsx(t.Fragment,{children:t.jsx(g,{gap:"20px",vertical:!0,children:t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{xs:24,md:8,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Savdolar soni")}),value:c.get(n,"total_count",0),precision:2,prefix:t.jsx(Y,{}),suffix:a("ta")})}),t.jsx(i,{xs:24,md:8,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Savdolar summasi")}),value:c.get(n,"total_summa",0),precision:2,prefix:t.jsx(A,{}),suffix:r})}),t.jsx(i,{xs:24,md:8,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("To'lovlar")}),value:c.get(n,"total_payments",0),precision:2,prefix:t.jsx(R,{}),suffix:r})}),t.jsx(i,{xs:24,md:24,children:t.jsx(ut,{data:n})}),t.jsx(i,{xs:24,md:24,children:t.jsx(dt,{data:n})}),t.jsx(i,{xs:24,md:24,children:t.jsx(mt,{data:n})})]})})})})})]})},dt=({data:a})=>{const{t:r}=h(),n=[{title:r("Nomi"),dataIndex:"product_name"},{title:r("Mahsulot miqdori"),dataIndex:"total_count",render:(e,s)=>t.jsx(t.Fragment,{children:p(e,c.get(s,"format_name",""))}),sorter:(e,s)=>e.total_count-s.total_count},{title:r("Mahsulot miqdori (Import)"),dataIndex:"total_imported",render:(e,s)=>t.jsx(t.Fragment,{children:p(e,c.get(s,"format_name",""))}),sorter:(e,s)=>e.total_imported-s.total_imported},{title:r("Mahsulot summasi"),dataIndex:"total_summa",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.total_summa-s.total_summa},{title:r("Mahsulot summasi (Import)"),dataIndex:"import_summa",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.import_summa-s.import_summa},{title:r("Foyda"),dataIndex:"profit",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.profit-s.profit}],[u,o]=l.useState([]);return l.useEffect(()=>{const e=c.get(a,"top_10_products",[]).map((s,m)=>({...s}));o(e)},[a]),t.jsx(F,{title:r("Top 10 mahsulotlar"),dataSource:u,columns:n,pagination:!1})},ut=({data:a})=>{const{t:r}=h(),[n,u]=l.useState([]);l.useEffect(()=>{const e=c.get(a,"top_10_products",[]).map((s,m)=>({type:s.product_name,value:s.total_summa}));u(e)},[a]);const o={data:n};return t.jsx(v,{title:r("Top 10 mahsulotlar (savdo summasi bo'yicha)"),children:t.jsx(K,{config:o})})},mt=({data:a})=>{const{t:r}=h(),n=[{title:r("Nomi"),dataIndex:"product_name",sorter:(e,s)=>e.product_name.localeCompare(s.product_name)},{title:r("Mahsulot miqdori"),dataIndex:"total_count",render:(e,s)=>t.jsx(t.Fragment,{children:p(e,c.get(s,"format_name",""))}),sorter:(e,s)=>e.total_count-s.total_count},{title:r("Mahsulot miqdori (Import)"),dataIndex:"total_imported",render:(e,s)=>t.jsx(t.Fragment,{children:p(e,c.get(s,"format_name",""))}),sorter:(e,s)=>e.total_imported-s.total_imported},{title:r("Mahsulot summasi"),dataIndex:"total_summa",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.total_summa-s.total_summa},{title:r("Mahsulot summasi (Import)"),dataIndex:"import_summa",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.import_summa-s.import_summa},{title:r("Foyda"),dataIndex:"profit",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.profit-s.profit}],[u,o]=l.useState([]);return l.useEffect(()=>{const e=c.get(a,"product_stats",[]).map((s,m)=>({...s}));o(e)},[a]),t.jsx(F,{title:r("Barcha mahsulotlar"),dataSource:u,columns:n,pagination:!0})},xt=()=>{const{t:a}=h(),{company:{currency_type:r}}=P(),{productsOptions:n,productsData:u}=O(),[o,e]=l.useState(S().format("YYYY")),[s,m]=l.useState(""),[D,M]=l.useState({name:"",format:""});l.useEffect(()=>{m(c.get(n[0],"value",""))},[n]),l.useEffect(()=>{const d=u.find(y=>y.id===s);d&&M(d)},[s,u]);const{data:j,isLoading:C,error:T}=B({queryKey:["product-yearly",{date:o,productID:s}],queryFn:()=>Z({date:o,productID:s}),select:d=>d.data,enabled:!!s});return t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{xs:24,children:t.jsxs(g,{align:"center",justify:"space-between",children:[t.jsx(x.Title,{level:5,children:a("Yillik statistika")}),t.jsxs(g,{gap:"middle",align:"center",children:[t.jsx(w,{style:{width:"150px"},options:n,value:s,onChange:d=>m(d)}),t.jsx($,{style:{width:"150px"},picker:"year",value:S(o),format:"YYYY",onChange:(d,y)=>{e(y)}})]})]})}),t.jsx(i,{xs:24,children:C?t.jsx(q,{}):t.jsx(t.Fragment,{children:T?t.jsx(G,{error:T}):t.jsx(t.Fragment,{children:t.jsx(g,{gap:"20px",vertical:!0,children:t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Yil")}),value:o,formatter:d=>`${d}`,prefix:t.jsx(b,{})})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot")}),value:c.get(D,"name",""),formatter:d=>`${d}`,prefix:t.jsx(b,{})})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot miqdori")}),value:c.get(j,"total_count",0),precision:2,prefix:t.jsx(Y,{}),suffix:c.get(D,"format.name","")})}),t.jsx(i,{xs:24,md:6,children:t.jsx(f,{title:t.jsx(x.Title,{level:4,children:a("Mahsulot summasi")}),value:c.get(j,"total_summa",0),precision:2,prefix:t.jsx(A,{}),suffix:r})}),t.jsx(i,{xs:24,md:24,children:t.jsx(ht,{data:j})}),t.jsx(i,{xs:24,md:24,children:t.jsx(jt,{data:j})}),t.jsx(i,{xs:24,md:24,children:t.jsx(pt,{data:j})})]})})})})})]})},ht=({data:a})=>{const{t:r}=h(),[n,u]=l.useState([]);l.useEffect(()=>{const e=c.get(a,"monthly_stats",[]).map((s,m)=>({type:E(s.month),value:s.total_count}));u(e)},[a]);const o={data:n};return t.jsx(v,{title:r("Mahsulot miqdori (oylar bo'yicha)"),children:t.jsx(K,{config:o})})},jt=({data:a})=>{const{t:r}=h(),[n,u]=l.useState([]);l.useEffect(()=>{const e=c.get(a,"monthly_stats",[]).map((s,m)=>({type:E(s.month),value:s.total_summa}));u(e)},[a]);const o={data:n};return t.jsx(v,{title:r("Mahsulot summasi (oylar bo'yicha)"),children:t.jsx(k,{config:o})})},pt=({data:a})=>{const{t:r}=h(),n=[{title:r("Oy"),dataIndex:"month",render:e=>t.jsx(t.Fragment,{children:E(e)})},{title:r("Mahsulot miqdori"),dataIndex:"total_count",render:e=>t.jsx(t.Fragment,{children:p(e,c.get(a,"format_name",""))}),sorter:(e,s)=>e.total_count-s.total_count},{title:r("Mahsulot summasi"),dataIndex:"total_summa",render:e=>t.jsx(t.Fragment,{children:p(e)}),sorter:(e,s)=>e.total_summa-s.total_summa}],[u,o]=l.useState([]);return l.useEffect(()=>{const e=c.get(a,"monthly_stats",[]).map((s,m)=>({...s}));o(e)},[a]),t.jsx(F,{title:r("Mahsulot (oylar bo'yicha)"),dataSource:u,columns:n,pagination:!1})},$t=()=>{const{t:a}=h(),r=tt();return t.jsxs(t.Fragment,{children:[t.jsx(N,{children:t.jsx("title",{children:a("Mahsulotlar statistikasi")})}),t.jsxs(_,{gutter:[20,20],children:[t.jsx(i,{span:24,children:t.jsxs(g,{align:"center",justify:"space-between",children:[t.jsx(U,{children:a("Mahsulotlar statistikasi")}),t.jsx(g,{gap:"middle",children:t.jsx(Q,{})})]})}),t.jsx(i,{span:24,children:t.jsx(H,{items:r})}),t.jsx(i,{span:24,children:t.jsxs(V,{tabPosition:"top",children:[t.jsx(I.TabPane,{tab:a("Umumiy"),children:t.jsx(ct,{})},"1"),t.jsx(I.TabPane,{tab:a("Kunlik"),children:t.jsx(et,{})},"2"),t.jsx(I.TabPane,{tab:a("Oylik"),children:t.jsx(nt,{})},"4"),t.jsx(I.TabPane,{tab:a("Yillik"),children:t.jsx(xt,{})},"3")]})})]})]})};export{$t as default};
