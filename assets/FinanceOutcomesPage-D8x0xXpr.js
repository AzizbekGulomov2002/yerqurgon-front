import{u as f,j as e,o as g,I as E,l as y,M,a2 as O,X as m,aB as h,aI as D,aQ as N,B as F,r as x,aq as P,ar as L}from"./index-TTKrRBsV.js";import{G as Q,C as w}from"./GlobalSearchInput-D1DeoeWx.js";import{C as G}from"./CreateButton-xdDnGHH7.js";import{C as U}from"./CustomDataTable-D2IlOEuA.js";import{P as A,B as K}from"./PageTitle-OKMYAOp7.js";import{u as _,h as $,a as H}from"./useFinanceTransactions-DmFhBg5U.js";import{u as J}from"./useQuery-DXHJDm7O.js";import{C as V}from"./CustomModalConfirm-DuPb8srr.js";import{R as X}from"./EditFilled-96y0AoAx.js";import{R as W}from"./DeleteFilled-Lrowix85.js";import{R as S,C as l}from"./row-Bxwr5CQq.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./CardTitle-WCnvc5ze.js";import"./Table-DaguqWZh.js";import"./LeftOutlined-30Vtg-fw.js";import"./finance-transactions.requests-SV3CdYtH.js";import"./useClosable-CgTQR01w.js";import"./Skeleton-Bgqqq5sk.js";import"./fade-m1HoRkfl.js";const Y=()=>{const{t:n}=f();return[{title:e.jsxs(g,{align:"center",gap:"small",children:[e.jsx(E,{size:20}),e.jsx("span",{children:n("Moliya")})]})},{title:n("Chiqimlar")}]},Z=(n,p,s,d)=>{const{t:a}=f(),o=y(),{transactionsOptions:j}=_(),u=M({mutationFn:$,onSuccess:()=>{O(a("Muvaffaqiyatli bajarildi !")),d()},onError:t=>{console.log(t)}}),r=t=>{u.mutate(t)};return[{title:"â„–",dataIndex:"id",key:"id",render:(t,c,C)=>e.jsx(e.Fragment,{children:(n.current-1)*n.pageSize+C+1})},{title:a("Tranzaktsiya"),dataIndex:"transaction",key:"transaction",render:t=>e.jsx(e.Fragment,{children:m.get(t,"name","")}),filters:[...j],filteredValue:p.transaction||null,filterSearch:!0},{title:a("Naqt"),dataIndex:"cash",key:"cash",hidden:!0,render:t=>e.jsx(e.Fragment,{children:h(t)})},{title:a("Karta"),dataIndex:"card",key:"card",hidden:!0,render:t=>e.jsx(e.Fragment,{children:h(t)})},{title:a("Boshqa"),dataIndex:"other",key:"other",hidden:!0,render:t=>e.jsx(e.Fragment,{children:h(t)})},{title:a("Jami summa"),dataIndex:"total",key:"total",render:(t,c)=>e.jsx(e.Fragment,{children:h(m.get(c,"cash",0)+m.get(c,"card",0)+m.get(c,"other",0))})},{title:a("Sana"),dataIndex:"date",key:"date",render:t=>e.jsx(e.Fragment,{children:D(t)})},{title:a("Izoh"),dataIndex:"desc",key:"desc",render:t=>e.jsx(e.Fragment,{children:t})},{title:e.jsx(N,{size:15}),dataIndex:"id",key:"operation",align:"center",width:100,render:(t,c)=>e.jsxs(g,{align:"center",justify:"space-between",gap:"middle",children:[e.jsx(F,{onClick:()=>o(`/finance/finance-outcomes/update/${t}`),icon:e.jsx(X,{})}),e.jsx(V,{trigger:e.jsx(F,{danger:!0,icon:e.jsx(W,{})}),onOk:()=>r(t)})]})}]},ye=()=>{const{t:n}=f(),p=y(),[s,d]=x.useState({current:1,pageSize:10,total:null}),[a,o]=x.useState({}),[j,u]=x.useState(""),{data:r,isLoading:t,isError:c,error:C,isFetching:ee,refetch:I,isRefetching:k,...te}=J({queryKey:["finance-outcomes",{page:s.current,pageSize:s.pageSize,filters:a}],queryFn:()=>H(s.current,s.pageSize,P(a)),select:i=>i.data,keepPreviousData:!0});x.useEffect(()=>{r&&d({current:r.current||1,pageSize:r.pageSize||10,total:r.total||""})},[r]);const B=(i,v)=>{d({...i}),o(v)},z=()=>{o({}),u("")},T=i=>{o({...a,search:i})},b=i=>{u(i.target.value)},R=Z(s,a,o,I),q=Y();return e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsx("title",{children:n("Chiqimlar")})}),e.jsxs(S,{gutter:[20,20],children:[e.jsx(l,{span:24,children:e.jsx(g,{align:"center",justify:"space-between",children:e.jsx(A,{children:n("Chiqimlar")})})}),e.jsx(l,{span:24,children:e.jsx(K,{items:q})}),e.jsx(l,{span:24,children:e.jsxs(S,{gutter:[20,20],children:[e.jsx(l,{xs:24,sm:24,md:24,lg:6,xl:6,children:e.jsx(Q,{value:j,placeholder:n("Qidiruv"),enterButton:!0,onSearch:T,onChange:b})}),e.jsx(l,{xs:24,sm:24,md:24,lg:18,xl:18,children:e.jsxs(g,{align:"center",justify:"end",gap:"middle",children:[e.jsx(w,{onClick:z}),e.jsx(G,{onClick:()=>p("create")})]})}),e.jsx(l,{span:24,children:e.jsx(U,{columns:R,data:(r==null?void 0:r.results)||[],pagination:s,loading:t||k,onChange:B})})]})})]})]})};export{ye as default};
