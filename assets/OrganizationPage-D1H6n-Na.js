import{u as h,r as q,j as e,O as b,a0 as E,v as I,o as j,B,at as D,e7 as O,l as M,ef as N,ar as V,X as t,D as L,aI as C,z as F,aB as w,dV as A,aP as Q,eg as H,M as K,eh as X,as as v,ei as $,a2 as G}from"./index-TTKrRBsV.js";import{C as Y}from"./CustomTabs-DeR7qKEd.js";import{P as J,E as W}from"./PageLoader-DmyE2ANN.js";import{P as Z,B as ee}from"./PageTitle-OKMYAOp7.js";import{T as o}from"./TitleAndIconText-Dlp7yQ8-.js";import{u as se}from"./useQuery-DXHJDm7O.js";import{C as _}from"./CustomInput-CfXd1HaZ.js";import{c as ae,a as k,u as re,F as p,C as P,o as te}from"./index.esm-Dv3jW_V-.js";import{R as y,C as l}from"./row-Bxwr5CQq.js";import{D as ie}from"./index-CwYkfvr8.js";import{T as S}from"./index-CB8Qoy1w.js";import{C as oe}from"./index-Chkbatr3.js";import{T as U}from"./index-Ce0i5KU3.js";import"./index-DVNdkQR1.js";import"./index-CRizbU4B.js";import"./PlusOutlined-Ba-GwlE8.js";import"./Skeleton-Bgqqq5sk.js";import"./useClosable-CgTQR01w.js";const ne=({defaultValues:s,handleSubmit:c,actionLoading:a=!1,readOnly:u=!1})=>{const{t:i}=h(),n=ae().shape({comp_name:k().required(i("Ism kiritilishi kerak !")),currency_type:k().required(i("Telefon raqam kiritilishi kerak !"))}),d=te(n),{control:r,formState:{errors:x},reset:g,watch:T,...f}=re({defaultValues:{...s},resolver:d});q.useEffect(()=>{g(s)},[s]);const R=()=>g({}),z=f.handleSubmit(m=>{c(m,R)});return e.jsxs(p,{layout:"vertical",className:"create-form",name:"create-form",size:"large",onFinish:z,children:[e.jsxs(y,{gutter:[20,20],children:[e.jsx(l,{xs:24,md:6,children:e.jsx(p.Item,{label:i("Korxona nomi"),...b(x,"comp_name"),required:!0,children:e.jsx(P,{name:"comp_name",control:r,render:({field:m})=>e.jsx(_,{...m,prefix:e.jsx(E,{})})})})}),e.jsx(l,{xs:24,md:6,children:e.jsx(p.Item,{label:i("Valyuta turi"),...b(x,"currency_type"),required:!0,children:e.jsx(P,{name:"currency_type",control:r,render:({field:m})=>e.jsx(_,{...m,prefix:e.jsx(I,{})})})})})]}),e.jsx(ie,{}),e.jsx(p.Item,{children:e.jsx(j,{align:"center",justify:"end",gap:"middle",children:e.jsx(B,{type:"primary",htmlType:"submit",loading:a,disabled:a,children:i("O'zgartirish")})})})]})},le=()=>{const{t:s}=h();return D(),[{title:e.jsxs(j,{align:"center",gap:"small",children:[e.jsx(O,{size:20}),e.jsx("span",{children:s("Sozlamalar")})]})},{title:e.jsx(e.Fragment,{children:s("Tashkilot")})}]},Se=()=>{const{t:s}=h();M();const{me:{role:c}}=N(),{data:a,isLoading:u,isError:i,error:n,isFetching:d,refetch:r,isRefetching:x,...g}=se({queryKey:["company"],queryFn:()=>$(),select:f=>f.data}),T=le();return e.jsxs(e.Fragment,{children:[e.jsx(V,{children:e.jsx("title",{children:s("Tashkilot")})}),e.jsxs(y,{gutter:[20,20],children:[e.jsx(l,{span:24,children:e.jsx(j,{align:"center",justify:"space-between",children:e.jsx(Z,{children:s("Tashkilot")})})}),e.jsx(l,{span:24,children:e.jsx(ee,{items:T})}),e.jsx(l,{span:24,children:u?e.jsx(J,{}):e.jsx(e.Fragment,{children:n?e.jsx(W,{error:n}):e.jsx(e.Fragment,{children:e.jsxs(Y,{tabPosition:"top",children:[e.jsx(S.TabPane,{tab:s("Tashkilot ma'lumotlari"),children:e.jsx(y,{gutter:[20,20],children:e.jsx(l,{xs:24,md:24,children:e.jsx(oe,{children:e.jsxs(j,{vertical:!0,gap:"large",children:[e.jsx(o,{title:s("Tashkilot nomi").toUpperCase(),value:t.get(a,"comp_name",""),icon:e.jsx(E,{})}),e.jsx(o,{title:s("Valyuta turi").toUpperCase(),value:t.get(a,"currency_type",""),icon:e.jsx(I,{})}),e.jsx(o,{title:s("Ta'rif").toUpperCase(),value:t.get(a,"tariff",""),icon:e.jsx(L,{})}),e.jsx(o,{title:s("Yaratilgan sana").toUpperCase(),value:C(t.get(a,"created","")),icon:e.jsx(F,{})}),e.jsx(o,{title:s("Limit tugash vaqti").toUpperCase(),value:C(t.get(a,"active_days","")),icon:e.jsx(F,{})}),e.jsx(o,{title:s("Qolgan kun").toUpperCase(),value:w(t.get(a,"range_day",0),s("kun")),icon:e.jsx(A,{})}),e.jsx(o,{title:s("Holati").toUpperCase(),value:t.get(a,"is_active","")==="Qarzdorlik"?e.jsx(U,{color:"red",children:s("No faol")}):e.jsx(U,{color:"green",children:s("Faol")}),icon:e.jsx(Q,{})})]})})})})},"1"),H(["DIRECTOR"],c,e.jsx(e.Fragment,{children:e.jsx(S.TabPane,{tab:s("Ma'lumotlarni o'zgartirish"),children:e.jsx(ce,{user:a,refetch:r})},"2")}))]})})})})]})]})},ce=({user:s,refetch:c})=>{const{t:a}=h(),u=()=>{v(),G(a("Muvaffaqiyatli bajarildi !")),c()},{isPending:i,mutateAsync:n}=K({mutationFn:X,onSuccess:u,onError:r=>{v(),console.log(r)}}),d=async(r,x)=>{n({comp_name:t.get(r,"comp_name",""),currency_type:t.get(r,"currency_type","")})};return e.jsx(e.Fragment,{children:e.jsx(ne,{handleSubmit:d,defaultValues:s,actionLoading:i})})};export{Se as default};
